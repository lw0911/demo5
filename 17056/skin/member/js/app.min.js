function scrollTo(e,t,i){i||(i=300),e?$(e).length>0&&$("html,body").animate({scrollTop:$(e).offset().top+(t||0)},i):$("html,body").animate({scrollTop:0},i)}function is_page(e){return TBUI.bd.hasClass(e)?!0:!1}function is_name(e){return/.{2,20}$/.test(e)}function is_url(e){return/^((http|https)\:\/\/)([a-z0-9-]{1,}.)?[a-z0-9-]{2,}.([a-z0-9-]{1,}.)?[a-z0-9]{2,}$/.test(e)}function is_qq(e){return/^[1-9]\d{4,13}$/.test(e)}function is_mail(e){return/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/.test(e)}function strToDate(e,t){t||(t="yyyy-MM-dd hh:mm:ss"),e=new Date(1e3*e);var i={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in i)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[n]:("00"+i[n]).substr((""+i[n]).length)));return t}function logtips(e){return e?(_loginTipstimer&&clearTimeout(_loginTipstimer),$(".sign-tips").html(e).animate({height:29},220),void(_loginTipstimer=setTimeout(function(){$(".sign-tips").animate({height:0},220)},5e3))):!1}function comment_tips(e,t){if(!e)return!1;_comment_tips_timer&&clearTimeout(_comment_tips_timer),$(t+" .comment-tips").length||$(t+" .commentform").append('<div class="comment-tips"></div>');var i=$(t+" .comment-tips");i.html(e).css({"margin-left":-1*(i.width()/2+30)}).animate({"margin-top":-1*(i.height()/2+42),opacity:.8},300),_comment_tips_timer=setTimeout(function(){i.html(e).animate({"margin-top":0,opacity:0},300,function(){i.remove()})},3e3)}window.console||(window.console={log:function(){}}),function(e){"use strict";Date.now=Date.now||function(){return+new Date},e.ias=function(t){function i(){var t;if(_.onChangePage(function(e,t,i){T&&T.setPage(e,i),v.onPageChange.call(this,e,i,t)}),v.triggerPageThreshold>0)n();else if(e(v.next).attr("href")){var i=w.getCurrentScrollOffset(v.scrollContainer);g(function(){c(i)})}return T&&T.havePage()&&(a(),t=T.getPage(),w.forceScrollTop(function(){var i;t>1?(p(t),i=s(!0),e("html, body").scrollTop(i)):n()})),y}function n(){r(),v.scrollContainer.scroll(o)}function o(){var e,t;e=w.getCurrentScrollOffset(v.scrollContainer),t=s(),e>=t&&(m()>=v.triggerPageThreshold?(a(),g(function(){c(e)})):c(e))}function a(){v.scrollContainer.unbind("scroll",o)}function r(){e(v.pagination).hide()}function s(t){var i,n;return i=e(v.container).find(v.item).last(),0===i.size()?0:(n=i.offset().top+i.height(),t||(n+=v.thresholdMargin),n)}function c(t,i){var o;return(o=e(v.next).attr("href"))?void(v.beforePageChange&&e.isFunction(v.beforePageChange)&&v.beforePageChange(t,o)===!1||(_.pushPages(t,o),a(),d(),l(o,function(t,s){var c,l=v.onLoadItems.call(this,s);l!==!1&&(e(s).hide(),c=e(v.container).find(v.item).last(),c.after(s),e(s).fadeIn()),o=e(v.next,t).attr("href"),e(v.pagination).replaceWith(e(v.pagination,t)),h(),r(),o?n():a(),v.onRenderComplete.call(this,s),i&&i.call(this)}))):(v.noneleft&&e(v.container).find(v.item).last().after(v.noneleft),a())}function l(t,i,n){var o,a,r,s=[],c=Date.now();n=n||v.loaderDelay,e.get(t,null,function(t){o=e(v.container,t).eq(0),0===o.length&&(o=e(t).filter(v.container).eq(0)),o&&o.find(v.item).each(function(){s.push(this)}),i&&(r=this,a=Date.now()-c,n>a?setTimeout(function(){i.call(r,t,s)},n-a):i.call(r,t,s))},"html")}function p(t){var i=s(!0);i>0&&c(i,function(){a(),_.getCurPageNum(i)+1<t?(p(t),e("html,body").animate({scrollTop:i},400,"swing")):(e("html,body").animate({scrollTop:i},1e3,"swing"),n())})}function m(){var e=w.getCurrentScrollOffset(v.scrollContainer);return _.getCurPageNum(e)}function u(){var t=e(".ias_loader");return 0===t.size()&&(t=e('<div class="ias_loader">'+v.loader+"</div>"),t.hide()),t}function d(){var t,i=u();v.customLoaderProc!==!1?v.customLoaderProc(i):(t=e(v.container).find(v.item).last(),t.after(i),i.fadeIn())}function h(){var e=u();e.remove()}function f(t){var i=e(".ias_trigger");return 0===i.size()&&(i=e('<div class="ias_trigger"><a href="#">'+v.trigger+"</a></div>"),i.hide()),e("a",i).unbind("click").bind("click",function(){return b(),t.call(),!1}),i}function g(t){var i,n=f(t);v.customTriggerProc!==!1?v.customTriggerProc(n):(i=e(v.container).find(v.item).last(),i.after(n),n.fadeIn())}function b(){var e=f();e.remove()}var v=e.extend({},e.ias.defaults,t),w=new e.ias.util,_=new e.ias.paging(v.scrollContainer),T=v.history?new e.ias.history:!1,y=this;i()},e.ias.defaults={container:"#container",scrollContainer:e(window),item:".item",pagination:"#pagination",next:".next",noneleft:!1,loader:'<img src="images/loader.gif"/>',loaderDelay:600,triggerPageThreshold:3,trigger:"Load more items",thresholdMargin:0,history:!0,onPageChange:function(){},beforePageChange:function(){},onLoadItems:function(){},onRenderComplete:function(){},customLoaderProc:!1,customTriggerProc:!1},e.ias.util=function(){function t(){e(window).load(function(){i=!0})}var i=!1,n=!1,o=this;t(),this.forceScrollTop=function(t){e("html,body").scrollTop(0),n||(i?(t.call(),n=!0):setTimeout(function(){o.forceScrollTop(t)},1))},this.getCurrentScrollOffset=function(e){var t,i;return t=e.get(0)===window?e.scrollTop():e.offset().top,i=e.height(),t+i}},e.ias.paging=function(){function t(){e(window).scroll(i)}function i(){var t,i,a,l,p;t=c.getCurrentScrollOffset(e(window)),i=n(t),a=o(t),s!==i&&(l=a[0],p=a[1],r.call({},i,l,p)),s=i}function n(e){for(var t=a.length-1;t>0;t--)if(e>a[t][0])return t+1;return 1}function o(e){for(var t=a.length-1;t>=0;t--)if(e>a[t][0])return a[t];return null}var a=[[0,document.location.toString()]],r=function(){},s=1,c=new e.ias.util;t(),this.getCurPageNum=function(t){return t=t||c.getCurrentScrollOffset(e(window)),n(t)},this.onChangePage=function(e){r=e},this.pushPages=function(e,t){a.push([e,t])}},e.ias.history=function(){function e(){i=!!(window.history&&history.pushState&&history.replaceState),i=!1}var t=!1,i=!1;e(),this.setPage=function(e,t){this.updateState({page:e},"",t)},this.havePage=function(){return this.getState()!==!1},this.getPage=function(){var e;return this.havePage()?(e=this.getState(),e.page):1},this.getState=function(){var e,t,n;if(i){if(t=history.state,t&&t.ias)return t.ias}else if(e="#/page/"===window.location.hash.substring(0,7))return n=parseInt(window.location.hash.replace("#/page/",""),10),{page:n};return!1},this.updateState=function(e,i,n){t?this.replaceState(e,i,n):this.pushState(e,i,n)},this.pushState=function(e,n,o){var a;i?history.pushState({ias:e},n,o):(a=e.page>0?"#/page/"+e.page:"",window.location.hash=a),t=!0},this.replaceState=function(e,t,n){i?history.replaceState({ias:e},t,n):this.pushState(e,t,n)}}}(jQuery),!function(e){var t=/iPhone/i,i=/iPod/i,n=/iPad/i,o=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,a=/Android/i,r=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,s=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,c=/IEMobile/i,l=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,p=/BlackBerry/i,m=/BB10/i,u=/Opera Mini/i,d=/(CriOS|Chrome)(?=.*\bMobile\b)/i,h=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,f=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),g=function(e,t){return e.test(t)},b=function(e){var b=e||navigator.userAgent,v=b.split("[FBAN");return"undefined"!=typeof v[1]&&(b=v[0]),this.apple={phone:g(t,b),ipod:g(i,b),tablet:!g(t,b)&&g(n,b),device:g(t,b)||g(i,b)||g(n,b)},this.amazon={phone:g(r,b),tablet:!g(r,b)&&g(s,b),device:g(r,b)||g(s,b)},this.android={phone:g(r,b)||g(o,b),tablet:!g(r,b)&&!g(o,b)&&(g(s,b)||g(a,b)),device:g(r,b)||g(s,b)||g(o,b)||g(a,b)},this.windows={phone:g(c,b),tablet:g(l,b),device:g(c,b)||g(l,b)},this.other={blackberry:g(p,b),blackberry10:g(m,b),opera:g(u,b),firefox:g(h,b),chrome:g(d,b),device:g(p,b)||g(m,b)||g(u,b)||g(h,b)||g(d,b)},this.seven_inch=g(f,b),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window?this:void 0},v=function(){var e=new b;return e.Class=b,e};"undefined"!=typeof module&&module.exports&&"undefined"==typeof window?module.exports=b:"undefined"!=typeof module&&module.exports&&"undefined"!=typeof window?module.exports=v():"function"==typeof define&&define.amd?define("isMobile",[],e.isMobile=v()):e.isMobile=v()}(this),$.fn.serializeObject=function(){var e={},t=this.serializeArray();return $.each(t,function(){void 0!==e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e},TBUI.bd=$("body"),TBUI.is_signin=is_page("logged-in")?!0:!1,TBUI.roll=[1],window.stap={},$(document).on("click","[etap]",function(){if($(this).hasClass("disabled"))return!1;var e=$(this).attr("etap");if(e){var t=e;t.indexOf("|")>0?(t=e.split("|")[0],e=e.split("|")[1],"[object Object]"==Object.prototype.toString.call(e)&&(e=$.parseJSON(e))):e={},e.name=t,t=t.replace(/-/g,"_"),stap[t]&&stap[t]($(this),e)}}),$(".m-navbar-start").on("click",function(){TBUI.bd.toggleClass("m-navbar-on")}),$(".m-mask").on("click",function(){TBUI.bd.removeClass("m-navbar-on"),TBUI.bd.removeClass("m-wel-on")}),$(".m-wel-start").on("click",function(){TBUI.bd.toggleClass("m-wel-on")}),require(["jquery.cookie"],function(){!COOKIE.get("tb_wintips_ts")>0&&(stap.wintips_close=function(){$(".wintips").fadeOut(),COOKIE.set("tb_wintips_ts",$.now())},setTimeout(function(){TBUI.bd.append(''),$(".wintips").fadeIn()},3e3))}),is_page("page-post")&&require(["bootstrap"],function(){var e=$(".sidebar");if(e){var t=20,i=30,n=e.find(".widget:eq("+(TBUI.roll[0]-1)+")"),o=n.height();n.on("affix-top.bs.affix",function(){n.css({top:0}),o=n.height();for(var t=1;t<TBUI.roll.length;t++){var i=TBUI.roll[t]-1,a=e.find(".widget:eq("+i+")");a.removeClass("affix").css({top:0})}}),n.on("affix.bs.affix",function(){n.css({top:t});for(var a=1;a<TBUI.roll.length;a++){var r=TBUI.roll[a]-1,s=e.find(".widget:eq("+r+")");s.addClass("affix").css({top:o+i}),o+=s.height()+30}}),n.affix({offset:{top:e.height(),bottom:$(".footer").outerHeight()}})}}),isMobile.any,$("pre").each(function(){$(this).attr("style")||$(this).addClass("prettyprint linenums")}),$(".prettyprint").length&&require(["prettyprint"],function(){prettyPrint()}),is_page("page-home")&&require(["swiper"],function(){new Swiper(".home-swiper .swiper-container",{pagination:".swiper-pagination",nextButton:".swiper-button-next",prevButton:".swiper-button-prev",slidesPerView:1,paginationClickable:!0,spaceBetween:30,loop:!0})}),is_page("page-blogs")&&require(["b"],function(e){e.init()}),is_page("page-vip")&&require(["vip"],function(e){e.init()}),is_page("page-member")&&require(["member"]),is_page("page-theme-item")&&require(["theme"]),is_page("page-item")&&require(["item"]),is_page("page-question")&&require(["question"]),stap.login_submit=function(e){if(!TBUI.is_signin){var t=$(e).parent().parent(),i=t.serializeObject();return is_mail(i.user_name)?void $.ajax({type:"POST",url:TBUI.URL+"/login",data:i,dataType:"json",success:function(e){e.msg&&logtips(e.msg),e.error||(location.href=$("#back").val())}}):void logtips("邮箱格式错误")}},stap.register_submit=function(e){if(!TBUI.is_signin){var t=$(e).parent().parent(),i=t.serializeObject();return is_mail(i.user_email)?is_name(i.user_name)?void $.ajax({type:"POST",url:TBUI.URL+"/register",data:i,dataType:"json",success:function(e){e.msg&&logtips(e.msg),100==e.error&&($(".register-verification").fadeIn(),$(".register-start").hide()),e.error}}):void logtips("显示名在2-20字之间"):void logtips("邮箱格式错误")}};var _loginTipstimer,share={url:document.URL,pic:"",title:document.title||"",desc:$('meta[name="description"]').length?$('meta[name="description"]').attr("content"):""};stap.qrcode_close=function(e){e.next().animate({top:"120%",opacity:0},600,function(){e.parent().hide()})},stap.share=function(e){var t=e.data("share"),i="";switch(t){case"qq":i="http://connect.qq.com/widget/shareqq/index.html?url="+share.url+"&desc="+share.desc+"&summary="+share.title+"&site=zeshlife&pics="+share.pic;break;case"weibo":i="http://service.weibo.com/share/share.php?title="+share.title+"&url="+share.url+"&source=bookmark&pic="+share.pic;break;case"douban":i="http://www.douban.com/share/service?image="+share.pic+"&href="+share.url+"&name="+share.title+"&text="+share.desc;break;case"qzone":i="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url="+share.url+"&title="+share.title+"&desc="+share.desc;break;case"tqq":i="http://share.v.t.qq.com/index.php?c=share&a=index&url="+share.url+"&title="+share.title;break;case"weixin":$(".qr-code").length||$("body").append('<div class="qr-code"><div class="qr-code-mask" etap="qrcode_close"></div><div class="qr-code-in"><img src="http://s.jiathis.com/qrcode.php?url='+share.url+'"><p>微信扫一扫，分享快乐</p></div></div>'),$(".qr-code").show().find(".qr-code-in").animate({top:"50%",opacity:1},600)}e.attr("href")||e.attr("target")||e.attr("href",i).attr("target","_blank")},stap.ub=function(){$(".listbanners").slideToggle()},stap.ubanner=function(e){var t=e.parent().parent(),i=t.serializeObject();e.addClass("disabled"),$.ajax({type:"POST",url:TBUI.URL+"/action/ubanner",data:i,dataType:"json",success:function(t){e.removeClass("disabled"),t.msg&&comment_tips(t.msg),t.response&&t.response.reload&&location.reload()}})},stap.commentpopup_close=function(){$(".commentpopup-mask, .commentpopup-box").remove()},stap.comment_reply=function(e){var t=$.trim(e.data("id"));if(t){var i=$(".commentform").clone(!0),n=e.parent().find(".user").text();TBUI.bd.append('<div class="commentpopup-mask" etap="commentpopup_close"></div><div class="commentpopup-box"><h4>回复 '+n+"的评论</h4></div>"),i.appendTo(".commentpopup-box"),$('.commentpopup-box .commentform [name="content"]').focus().attr("tabindex","10"),$('.commentpopup-box .commentform [name="comment_id"]').val(t),$(".commentpopup-box .commentform .btn-primary").val("提交回复").attr("tabindex","11")}},stap.comment=function(e){var t=e.parent(),i=t.serializeObject(),n="#comments";return i.content=$.trim(i.content),i.comment_id=$.trim(i.comment_id),i.comment_id&&Number(i.comment_id)>0&&(n=".commentpopup-box"),i.post_id?/.{5,250}$/.test(i.content)?(e.addClass("disabled"),void $.ajax({type:"POST",url:TBUI.URL+"/action/comment",data:i,dataType:"json",success:function(t){if(e.removeClass("disabled"),t.msg&&comment_tips(t.msg,n),!t.error){$('.commentform [name="content"]').val(""),stap.commentpopup_close();var i='<div class="comment-item" style="display:none">'+t.response.user_avatar+'<div class="text">'+t.response.comment_content+'</div><footer><span class="user">'+t.response.user_name+"</span><time>"+t.response.comment_ts+"</time></footer></div>";t.response.comment_parent_id?($(".comment-"+t.response.comment_parent_id+" > footer").after(i),$(".comment-"+t.response.comment_parent_id+" > .comment-item").slideDown()):($(".commentslist").prepend(i),$(".commentslist").find(".comment-item:first").slideDown())}}})):void comment_tips("字数请限制在5-250之间",n):void comment_tips("ID异常",n)};var _comment_tips_timer;