/****************************************************************
 *																*		
 * 						      素材火							*
 *                        www.sucaihuo.com							*
 *       		  努力创建完善、持续更新插件以及模板			*
 * 																*
****************************************************************/
$(function () { function kefuDivPosition() { if ($("#KeFuDiv").length > 0) { gID("KeFuDiv").style.top = (document.documentElement.clientHeight - gID("KeFuDiv").offsetHeight - 200) / 2 + "px"; gID("KeFuDiv").style.left = document.documentElement.clientWidth - gID("KeFuDiv").offsetWidth - 20 + "px" } }; $(window).resize(function () { kefuDivPosition() }); if ($("#KeFuDiv").length > 0) { kefuDivPosition(); $(".qqlist .c2").hide(); $(".qqlist .kfQQ").slideDown("slow"); ScrollDiv('KeFuDiv') }; setTimeout(function () { $(".qqlist .c2").show(); $(".qqlist .kfQQ").hide() }, 10000); $(".homeCase dt h3 a").hover(function () { $(".homeCase dt h3 a").removeClass("hover"); var index = $(this).index(); $(".homeCase dd ul").hide(); $(".homeCase dd ul").eq(index).stop().fadeIn("fast"); $(this).addClass("hover") }); $(".qqlist").hover(function () { $(this).find(".c2").hide(); $(this).stop(true, true).find(".kfQQ").show() }, function () { $(this).find(".c2").show(); $(this).stop(true, true).find(".kfQQ").hide() }); $('.input').focus(function () { if (this.value != '') this.value = ''; if (this.value != this.defaultValue) { this.select() } }); $('.input').blur(function () { if ($.trim(this.value) == '') { this.value = this.defaultValue } }); $(".homeCase dd li").hover(function () { $(this).find(".txt").stop().show("fast") }, function () { $(this).find(".txt").stop().hide() }); $(".hnLeft dt li").hover(function () { $(".lineT").stop().animate({ 'left': $(this).offsetParent().context.offsetLeft }, 200); $(this).addClass("hover").siblings().removeClass(); var index = $(this).index(); $(".hnLeft dd ul").hide(); $(".hnLeft dd ul").eq(index).show(); $(this).find().show() }); var linksA = $(".links dd a:gt(9)"); linksA.hide(); $(".linksIcon").click(function () { if (linksA.is(":visible")) { $(".links dd").animate({ "height": "30px" }, 500); linksA.hide() } else { $(".links dd").css("height", "auto"); linksA.show() } }); $(".gotop").click(function () { $('html,body').animate({ scrollTop: '0px' }, 800) }); $(".lastReplace li:last").css("border-bottom:none"); $("#banner").kinMaxShow({ height: 531, button: { showIndex: false, normal: { background: 'url(Templates/ruilian/images/button.png) no-repeat -7px 0', marginRight: '12px', border: '0', right: '46%', bottom: '15px' }, focus: { background: 'url(Templates/ruilian/images/button.png) no-repeat 0 0', border: '0' } }, callback: function (index, action) { switch (index) { case 2: if (action == 'fadeIn') { $(this).find('.sub_1_1').animate({ right: '145px' }, 600) } else { $(this).find('.sub_1_1').animate({ right: '155px' }, 600) }; break; case 3: if (action == 'fadeIn') { $(this).find('.sub_5_1').animate({ left: '-30px' }, 600); $(this).find('.sub_5_2').animate({ right: '-30px' }, 600) } else { $(this).find('.sub_5_1').animate({ left: '-30px' }, 600); $(this).find('.sub_5_2').animate({ right: '-20px' }, 600) }; break } } }); $("#KeFuDiv .c1").click(function () { $('#iconDivMain1 div').eq(1).click() }) }); function BrowserRedirect(url) { var sUserAgent = navigator.userAgent.toLowerCase(); var bIsIpad = sUserAgent.match(/ipad/i) == "ipad"; var bIsIphoneOs = sUserAgent.match(/iphone os/i) == "iphone os"; var bIsAndroid = sUserAgent.match(/android/i) == "android"; if (bIsIpad || bIsIphoneOs || bIsAndroid) window.location.href = url }; window.onload = function () { }; jQuery.extend({ 'nicenav': function (con, n) { con = typeof con === 'number' ? con : 400; var $lis = $(".nav>ul>li:not(.clear)"), $h = $('#buoy'); $lis.hover(function () { $(this).find("div").slideDown(); $h.stop().animate({ 'left': $(this).offsetParent().context.offsetLeft }, con) }, function () { $(this).find("div").hide(); $h.stop().animate({ 'left': $lis.eq(n).position().left }, con) }); $h.stop().animate({ 'left': $lis.eq(n).position().left }, con) } }); $.fn.kinMaxShow = function (user_options) { var default_options = { height: 500, intervalTime: 4, switchTime: 1000, easing: 'linear', imageAlign: 'center top', button: { switchEvent: 'click', showIndex: false, normal: { width: '7px', height: '7px', lineHeight: '7px', right: '12px', bottom: '10px', fontSize: '10px', background: "#cccaca", border: "1px solid #ffffff", color: "#666666", textAlign: 'center', marginRight: '12px', fontFamily: "Verdana", float: 'left' }, focus: { background: "#CC0000", border: "1px solid #FF0000", color: "#000000" } }, callback: function (index, action) { } }; options = jQuery.extend(true, {}, default_options, user_options); var k = {}; k.selector = $(this).selector; if ($(this).length > 1) { $.error('kinMaxShow error[More than one selected object]'); return false }; k.self = this; k.index = 0; k.lindex = 0; k.size = $(k.self).children('div').size(); k.prename = 'kinMaxShow_'; k.data = {}; k.fn = {}; k.onload = function () { $(k.self).css({ width: '100%', height: options.height, overflow: 'hidden', position: 'relative' }).children('div').addClass(k.prename + 'image_item').hide(); k.init() }; k.init = function () { k.setData(); k.setLayout(); k.setAnimate() }; k.setData = function () { k.data.title = new Array(); $(k.self).children('div').each(function () { k.data.title.push($(this).find('img').attr('alt')) }) }; k.setLayout = function () { $(k.self).children('div').wrapAll('<div class="' + k.prename + 'image_box"></div>'); $('.' + k.prename + 'image_item', k.self).each(function () { var a = $(this).children('a'); if (a.length) { var image = a.children('img').attr('src'); a.children('img').remove() } else { var image = $(this).children('img').attr('src'); $(this).children('img').remove() }; $(this).css({ background: 'url(' + image + ') no-repeat ' + options.imageAlign, 'z-index': 0 }) }); $('.' + k.prename + 'image_item', k.self).eq(0).css('z-index', '1'); if (options.button.normal.display != 'none') { var button_list = ''; for (i = 1; i <= k.size; i++) { if (options.button.showIndex) { button_list += '<li>' + i + '</li>' } else { button_list += '<li> </li>' } }; $(k.self).append('<ul class="' + k.prename + 'button">' + button_list + '</ul>'); $('.' + k.prename + 'button li', k.self).eq(0).addClass('focus') }; k.setCSS(); $('.' + k.prename + 'image_item:gt(0)', k.self).css('z-index', 0).css({ opacity: 0 }); $('.' + k.prename + 'image_item', k.self).show(); $(k.self).css({ overflow: 'visible', visibility: 'visible', display: 'block' }) }; k.setCSS = function () { var cssCode = '<style type="text/css">'; cssCode += k.selector + ' *{ margin:0;padding:0;} '; cssCode += k.selector + ' .' + k.prename + 'image_box{width:100%;height:' + parseInt(options.height) + 'px;position:relative;z-index:1;} '; cssCode += k.selector + ' .' + k.prename + 'image_box .' + k.prename + 'image_item{width:100%;height:' + parseInt(options.height) + 'px;position:absolute;overflow:hidden;} '; cssCode += k.selector + ' .' + k.prename + 'image_box .' + k.prename + 'image_item a{width:100%;height:' + parseInt(options.height) + 'px;display:block;text-decoration:none;padding:0;margin:0;background:transparent;text-indent:0;outline:none;hide-focus:expression(this.hideFocus=true);} '; if (options.button.normal.display != 'none') { cssCode += k.selector + ' .' + k.prename + 'button{' + k.fn.objToCss(options.button.normal, ['top', 'right', 'bottom', 'left'], true) + ';position:absolute;list-style:none;z-index:2;}'; cssCode += k.selector + ' .' + k.prename + 'button li{' + k.fn.objToCss(options.button.normal, ['top', 'right', 'bottom', 'left']) + ';cursor:pointer;-webkit-text-size-adjust:none;}'; cssCode += k.selector + ' .' + k.prename + 'button li.focus{' + k.fn.objToCss(options.button.focus, ['top', 'right', 'bottom', 'left']) + ';cursor:default;}' }; cssCode += '</style>'; $(k.self).prepend(cssCode) }; k.setAnimate = function () { options.callback.call($('.' + k.prename + 'image_item:eq(' + k.index + ')', k.self), k.index, 'fadeIn'); var overDelayTimer; $('.' + k.prename + 'button', k.self).delegate('li', options.button.switchEvent, function () { _this = this; function setChange() { k.index = $(_this).index(); k.setOpacity() }; if (options.button.switchEvent == 'mouseover') { overDelayTimer = setTimeout(setChange, 200) } else { setChange() } }); if (options.button.switchEvent == 'mouseover') { $('.' + k.prename + 'button', k.self).delegate('li', 'mouseout', function () { clearTimeout(overDelayTimer) }) }; k.index = 1; k.lindex = 0; k.data.moveTimer = setInterval(k.setOpacity, options.intervalTime * 1000 + options.switchTime) }; k.setOpacity = function () { options.callback.call($('.' + k.prename + 'image_item:eq(' + (k.lindex) + ')', k.self), k.lindex, 'fadeOut'); clearInterval(k.data.moveTimer); if (options.button.normal.display != 'none') { $('ul.' + k.prename + 'button li', k.self).removeClass('focus'); $('ul.' + k.prename + 'button li', k.self).eq(k.index).addClass('focus') }; $('.' + k.prename + 'image_item:animated', k.self).stop(true, false); $('.' + k.prename + 'image_item', k.self).css('z-index', 0); $('.' + k.prename + 'image_item', k.self).eq(k.index).css({ opacity: 0, 'z-index': 1 }); $('.' + k.prename + 'image_item', k.self).eq(k.index).animate({ opacity: 1 }, { duration: options.switchTime, easing: options.easing, complete: function () { $('.' + k.prename + 'image_box .' + k.prename + 'image_item:not(:eq(' + k.index + '))', k.self).css({ opacity: 0 }); options.callback.call($('.' + k.prename + 'image_item:eq(' + k.index + ')', k.self), k.index, 'fadeIn'); k.data.moveTimer = setInterval(k.setOpacity, options.intervalTime * 1000 + options.switchTime); k.lindex = k.index; if (k.index == k.size - 1) { k.index = 0 } else { k.index++ } } }) }; k.run = function () { k.onload() }; k.fn.objToCss = function (obj, excArr, excFlag) { excFlag = excFlag ? true : false; var isIE = navigator.userAgent.indexOf("MSIE") != -1; var style = ''; if (excFlag) { for (var key in obj) { if ($.inArray(key, excArr) != -1) { pKey = key.replace(/([A-Z])/, KtoLowerCase); if (pKey == 'opacity' && isIE) { style += "filter:alpha(opacity=" + (obj[key] * 100) + ");" } else { style += pKey + ":" + obj[key] + ";" } } } } else { for (var key in obj) { if ($.isArray(excArr)) { if ($.inArray(key, excArr) == -1) { pKey = key.replace(/([A-Z])/, KtoLowerCase); if (pKey == 'opacity' && isIE) { style += "filter:alpha(opacity=" + (obj[key] * 100) + ");" } else { style += pKey + ":" + obj[key] + ";" } } } else { pKey = key.replace(/([A-Z])/, KtoLowerCase); if (pKey == 'opacity' && isIE) { style += "filter:alpha(opacity=" + (obj[key] * 100) + ");" } else { style += pKey + ":" + obj[key] + ";" } } } }; function KtoLowerCase(word) { var str = ''; str = '-' + word.toLowerCase(); return str }; return style }; k.run() }; var caseTopNav = function (id) { $(".caseTop a#nav_" + id).addClass("hover") }; var classifyNav = function (id) { $(".classify a#nav_" + id).addClass("hover") }; function getAttributeValue(o, key) { if (!o.attributes) return null; var attr = o.attributes; for (var i = 0; i < attr.length; i++) { if (key.toLowerCase() == attr[i].name.toLowerCase()) return attr[i].value }; return null }; function focusInputEle(o) { if (o.value == getAttributeValue(o, 'defaultVal')) { o.value = ''; } }; function blurInputEle(o) { if (o.value == '') { o.value = getAttributeValue(o, 'defaultVal'); } }; function getsearch() { var key = $("#key").val(); if (key == "" || key == "请输入你要搜索的项目名称") { alert("搜索关键不能为空！"); return false } else { return true; window.location.href = '/Search.aspx?k=' + escape(key); return false } }; function CheckApply() { var title = $("#title").val(); var UserName = $("UserName").val(); var tel = $("#tel").val(); var cc = $("#checkcode").val(); if (title == "") { alert("服务名称不能为空！"); $("#title").focus(); return false }; if (UserName == "") { alert("联系人不能为空！"); $("UserName").focus(); return false }; if (tel == "") { alert("联系电话不能为空！"); $("#tel").focus(); return false }; if (cc == "") { alert("验证码不能为空！"); $("#checkcode").focus(); return false } }; function CheckContact() { var title = $("#title").val(); var uname = $("#uname").val(); var email = $("#email").val(); var contact = $("#contact").val(); var content = $("#content").val(); if (title == "" || title == "标题") { alert("标题不能为空！"); $("#title").focus(); return false }; if (uname == "" || uname == "姓名") { alert("姓名不能为空！"); $("#uname").focus(); return false }; if (email == "" || email == "E-mail") { alert("E-mail不能为空！"); $("#email").focus(); return false } else if (!isEmail(email)) { alert("E-mail输入格式不正确！"); $("#email").focus(); return false }; if (contact == "" || contact == "联系方式") { alert("联系方式不能为空！"); $("#contact").focus(); return false }; if (content == "") { alert("留言内容不能为空！"); $("#content").focus(); return false } }; function isEmail(str) { var reg = /^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/; return reg.test(str) }; function changecode() { $("#cc").attr("src", "/CheckCode.aspx?" + Math.random()) }; function changecode2014() { $("#cc").attr("src", "/ajax/CheckCode.aspx?" + Math.random()) }; function chucuo() { var domain = $("#domain").val(); var name = $("#name").val(); var anid = $("#anid").val(); $.ajax({ type: "post", url: "/ajax/anliStatus.aspx", data: { action: "checkurlvisit", name: escape(name), domain: domain, anid: anid }, dataType: "json", async: false, timeout: 30000, success: function (json) { if (json) { alert("提交报障成功！") } }, error: function () { alert("案例状态检测异常，请耐稍后尝试！"); } }) }; function GetQueryString(name) { var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i"); var r = window.location.search.substr(1).match(reg); if (r != null) return unescape(r[2]); return null }; function appCaseReset() { if (window.screen.width <= 450) { var _window = window.screen.width; $("#main").width(_window); $(".w1000").width(_window) } }