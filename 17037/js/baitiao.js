/* @update: 2015-4-15 19:22:22 */ 
function ScrollBar(t){this.leftBtn=t.leftBtn||null,this.rightBtn=t.rightBtn||null,this.scrollBody=t.scrollBody,this.holder=t.holder,this.indexBtn=t.indexBtn||null,this.indexBtnClass=t.indexBtnClass||null,this._autoPlay=t._autoPlay||!1,this.scrollType=t.scrollType||"opacity",this.css3Animate=t.css3Animate||!1,this._init()}function getCss3Animation(){var t=document.createElement("div"),e=!1;return"oninput"in t&&["","ms","webkit"].forEach(function(n){var i=n+(n?"A":"a")+"nimation";i in t.style&&(e=!0)}),e}$(document).ready(function(){function t(){var t=$("#homeBanner");if(!t[0])return!1;var e=$("#pre"),n=$("#nex"),i=t.find(".indexBtn"),a=t.find(".pic-layer"),s=a.find("li"),r=getCss3Animation();s.each(function(t){var e=$(this),n=e.attr("data-bkg");if(n&&!r){var i=new Image;i.src=n,i.index=t,i.onload=function(){s.eq(this.index).css("backgroundImage","url("+n+")")}}}),new ScrollBar({leftBtn:e,rightBtn:n,scrollBody:t,holder:s,indexBtn:i,indexBtnClass:"current",_autoPlay:!0,css3Animate:r})}function e(){var t=$("#homeBanner2");if(!t[0])return!1;var e=null,n=null,i=t.find(".indexBtn2"),a=t.find(".pic-layer2"),s=a.find(".q-box"),r=getCss3Animation();s.each(function(t){var e=$(this),n=e.attr("data-bkg");if(n&&!r){var i=new Image;i.src=n,i.index=t,i.onload=function(){s.eq(this.index).css("backgroundImage","url("+n+")")}}}),new ScrollBar({leftBtn:e,rightBtn:n,scrollBody:t,holder:s,indexBtn:i,indexBtnClass:"current",_autoPlay:!0,css3Animate:r})}function n(){var t=$("#homeBanner4");if(!t[0])return!1;var e=null,n=null,i=t.find(".indexBtn4"),a=t.find(".pic-layer4"),s=a.find(".goodlife-ul"),r=getCss3Animation();s.each(function(t){var e=$(this),n=e.attr("data-bkg");if(n&&!r){var i=new Image;i.src=n,i.index=t,i.onload=function(){s.eq(this.index).css("backgroundImage","url("+n+")")}}}),new ScrollBar({leftBtn:e,rightBtn:n,scrollBody:t,holder:s,indexBtn:i,indexBtnClass:"current",_autoPlay:!0,css3Animate:r})}function i(){var t=$("#homeBanner5");if(!t[0])return!1;var e=null,n=null,i=t.find(".indexBtn5"),a=t.find(".pic-layer5"),s=a.find(".recommend"),r=getCss3Animation();s.each(function(t){var e=$(this),n=e.attr("data-bkg");if(n&&!r){var i=new Image;i.src=n,i.index=t,i.onload=function(){s.eq(this.index).css("backgroundImage","url("+n+")")}}}),new ScrollBar({leftBtn:e,rightBtn:n,scrollBody:t,holder:s,indexBtn:i,indexBtnClass:"current",_autoPlay:!0,css3Animate:r})}function a(){var t=$("#on-order").find("li");$.ajax({url:"http://baitiao.jd.com/activity/queryBtOrder",type:"get",dataType:"json",success:function(e){var n=e,i=e.length,a=null;if(i>=12)for(var s=0;12>s;s++){var r="",o="";o="NULL"==n[s].userImgUrl?"http://static.360buyimg.com/finance/assets/common/1.3.0/css/i/user-logo.jpg":n[s].userImgUrl,a=Math.round(n[s].price/12*1.06*100)/100,r+='<a href="http://item.jd.com/'+n[s].skuId+'.html" target="_blank"><img  class="pro-img" src=http://img12.360buyimg.com/n7/'+n[s].imagePath+'></a><i class="li-bor"></i><span class="head-pic"><img src='+o+'></span><h4 class="whom-font">'+n[s].pin+'\u521a\u6253\u4e86\u4e2a\u767d\u6761</h4> <div class="fq-box"><p>\uffe5'+a+"</p>&nbsp<em>X&nbsp12\u671f</em></div>",t.eq(s).append(r)}else for(var s=0;i>s;s++){var r="",o="";alert(),o="NULL"==n[s].userImgUrl?"http://static.360buyimg.com/finance/assets/common/1.3.0/css/i/user-logo.jpg":n[s].userImgUrl,a=Math.round(n[s].price/12*1.06*100)/100,r+='<a href="http://item.jd.com/'+n[s].skuId+'.html" target="_blank"><img  class="pro-img" src=http://img12.360buyimg.com/n7/'+n[s].imagePath+'></a><i class="li-bor"></i><span class="head-pic"><img src='+o+'></span><h4 class="whom-font">'+n[s].pin+'\u521a\u6253\u4e86\u4e2a\u767d\u6761</h4> <div class="fq-box"><p>\uffe5'+a+"</p>&nbsp<em>x&nbsp12\u671f</em></div>",t.eq(s).append(r)}}})}$(".phone").parent().hover(function(){$(".wechat-code2").stop().animate({opacity:"1"},500),$(".wechat-code3").stop().animate({opacity:"0"},500),$(".we-2").addClass("animated rotateInDownLeft"),$(".we-1").removeClass("animated rotateInDownLeft"),$(".we-3").removeClass("animated rotateInDownLeft")}),$(".sina").parent().hover(function(){$(".wechat-code3").stop().animate({opacity:"1"},500),$(".we-3").addClass("animated rotateInDownLeft"),$(".we-1").removeClass("animated rotateInDownLeft"),$(".we-2").removeClass("animated rotateInDownLeft")}),$(".default").hover(function(){$(".wechat-code2").stop().animate({opacity:"0"},500),$(".wechat-code3").stop().animate({opacity:"0"},500),$(".we-1").addClass("animated rotateInDownLeft"),$(".we-2").removeClass("animated rotateInDownLeft"),$(".we-3").removeClass("animated rotateInDownLeft")}),$(".oul li").hover(function(){$(".oul li").stop().animate({opacity:"0.3"},500),$(this).stop().animate({opacity:"1"},500),$(".dot").removeClass("dot-on"),$(".dot").eq($(this).index()).addClass("dot-on")},function(){$(".oul li").stop().animate({opacity:"1"},500)}),$(".newp-span").click(function(){$(".new-plus").animate({height:"0"},500),$(".header-con").animate({height:"235"},500),$(".newp-span").hide()}),t(),e(),n(),i(),a()}),ScrollBar.prototype={_init:function(){this.currentIndex=0,this.targetIndex=0,this.itemNum=this.holder.length,this.scrollSpeed=1e3,this.css3Animate&&this.checkPicLoaded(this.holder.eq(this.currentIndex).show()),this._autoPlay&&(this.autoPlayLag=11e3,this.autoPlay()),this.bindEvent()},bindEvent:function(){var t=this;return this.leftBtn&&this.leftBtn.bind("click",function(){t.targetIndex--,t.targetIndex<0&&(t.targetIndex=t.itemNum-1),t.scroll("left")}),this.rightBtn&&this.rightBtn.bind("click",function(){t.targetIndex++,t.targetIndex>=t.itemNum&&(t.targetIndex=0),t.scroll("right")}),this.indexBtn&&this.indexBtn.bind("click",function(){$(this).index()>t.targetIndex?(t.targetIndex=$(this).index(),t.scroll("right")):$(this).index()<t.targetIndex&&(t.targetIndex=$(this).index(),t.scroll("left"))}),this._autoPlay&&this.scrollBody.bind("mouseenter",function(){clearInterval(t.timer),t.leftBtn&&t.leftBtn.show(),t.rightBtn&&t.rightBtn.show()}).bind("mouseleave",function(){t.autoPlay(),t.leftBtn&&t.leftBtn.hide(),t.rightBtn&&t.rightBtn.hide()}),this},scroll:function(){var t=this;this.indexBtn.removeClass(this.indexBtnClass).eq(this.targetIndex).addClass(this.indexBtnClass);var e=this.holder.eq(this.currentIndex).show();this.css3Animate&&t.resetLayer(e);var n=this.holder.eq(this.targetIndex).show();switch(this.title&&(this.title.eq(this.currentIndex).hide(),this.title.eq(this.targetIndex).show()),t.css3Animate&&t.checkPicLoaded(n),this.scrollType){case"opacity":e.stop().animate({opacity:0},t.scrollSpeed,function(){}),n.css("opacity",0),n.stop().animate({opacity:1},t.scrollSpeed,function(){t.holder.removeClass("active"),setTimeout(function(){n.addClass("active")},100)})}this.currentIndex=this.targetIndex},autoPlay:function(){var t=this;this.timer&&clearInterval(this.timer),this.timer=setInterval(function(){t.targetIndex++,t.targetIndex>=t.itemNum&&(t.targetIndex=0),t.scroll("right")},t.autoPlayLag)},checkPicLoaded:function(t){for(var e=this,n=t.children("div"),i=n.length,a=0,s=0;i>s;s++){var r=new Image;r.src=n.eq(s).attr("data-bkg"),r.onload=function(){a++,a==i&&(t.css("backgroundImage","none"),e.animateLayer(t))}}},resetLayer:function(t){var e=t.children("div");e.each(function(){$(this).removeClass($(this).attr("data-type")),$(this).attr("data-isBg")||$(this).hide()})},animateLayer:function(t){var e=this,n=t.children("div"),i=0,a=[],s=[];n.each(function(){a.push($(this)),$(this).removeClass($(this).attr("data-type"));var t=$(this).attr("data-delay");s[t-1]?s[t-1].push($(this)):s[t-1]=[$(this)]}),clearInterval(this.animateTimer),this.animateTimer=setInterval(function(){if(s[i])for(var t=0;t<s[i].length;t++){var n=s[i][t];n.css("backgroundImage","url("+n.attr("data-bkg")+")").show().addClass(n.attr("data-type"))}i>s.length&&clearTimeout(e.animateTimer),i++},100)}};