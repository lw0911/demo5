var ie6 = ! -[1, ] && !window.XMLHttpRequest;
window.onerror = function () { return false; }
function action() {
    $(".roll").find("li").hover(function () {
        $(this).siblings("li").find(".showTs").hide();
        $(this).find(".showTs").fadeIn();
    }, function () {
        $(this).find(".showTs").hide();
    });
    //$(document.body).append('<div id="roll" style="display:none;"><div title="回到顶部" id="roll_top"></div></div>');
    $("#roll_top").click(function () {
        $("html,body").animate({
            scrollTop: "0px"
        }, 800)
    });
    $("#ct").click(function () {
        $("html,body").animate({
            scrollTop: $(".ct").offset().top
        }, 800)
    });
    //使用浮动主导航
    //$(document.body).append($("div.header").clone().addClass("h_head_gd").hide());
    var div = $("div.h_head_gd");
    $(window).scroll(function (a) {

        if ($(this).scrollTop() > 260) {
            $("#roll,.kf").fadeIn()
        } else {
            $("#roll,.kf").fadeOut()
        }

        if ($(this).scrollTop() > 170) {
            div.show()
        } else {
            div.hide()
        }
    }).scroll();
};
//自动加载js执行效果 
if (typeof (console) == "undefined") {
    var console = function () { };
    console.log = function (msg) { }
}
$(function () {
    var FnAndJS = {
        "slide": ["/js/jquery.SuperSlide.2.1.1.js", "slide", function (data, src) {
            var src = jQuery(src);
            if ("slide" in src) {
                src.slide(data || {});
            }
        } ],
        "adgallery": ["/plug/ad-gallery/jquery.ad-gallery.js", "adGallery", function (data, src) {
            loadCss("/plug/ad-gallery/jquery.ad-gallery.css");
            var src = jQuery(src);
            if ("adGallery" in src) {
                setTimeout(function () {
                    src.adGallery(data || {});
                }, 500);
            }
        } ],
        "fancybox": ["/plug/fancybox/jquery.fancybox-1.3.4.pack.js", "fancybox", function (data, src, selector) {
            loadCss("/plug/fancybox/jquery.fancybox-1.3.4.css");
            var src = jQuery(src);
            if (selector) {
                src = src.find(selector);
            }
            if ("fancybox" in src) {
                setTimeout(function () {
                    src.fancybox(data || {});
                }, 500);
            }
        } ]
    };
    var Execution = function (fn, me, data, fnName, selector) { if (fn && jQuery.isFunction(fn)) { var rv = null; if (jQuery.isArray(data)) { rv = fn.apply(me, data) } else { rv = fn.apply(me, [data, me, selector]) } if (data["ExecutionCallback"] && fnName != "ExecutionCallback") { fn = data["ExecutionCallback"]; if (fn) { fn = window[fn]; Execution(fn, me, data, "ExecutionCallback", selector) } } } }; $(".plug[data-src]").each(function () { var me = $(this); var data_ = me.attr("data-src") || {}; var data = null; var fn = me.attr("fn") || "slide"; var selector = me.attr("selector") || ""; if (fn && (fn in FnAndJS || fn in window)) { try { data = jQuery.parseJSON(data_) } catch (e) { data = eval("(" + data_ + ")") } if (data) { try { if (fn in FnAndJS) { var arr = FnAndJS[fn]; if (arr && !(fn in me)) { var fn_ = arr[1]; if (fn_ && (fn_ = (me[fn_] || window[fn_]))) { Execution(fn_, me, data, "", selector) } else { fn_ = arr[1]; loadJs(arr[0], function () { Execution(arr[2] || me[fn_ || fn], me, data, "", selector) }) } } else { Execution(me[fn] || window[fn], me, data, "", selector) } } else { if (fn in window) { Execution(window[fn], me, data, "", selector) } } } catch (e) { console.log(e) } } } });
});
/*在线客服开始*/
function imState() { $.get("/ajax.ashx?action=imstate&t=" + Math.random(), function (rsp) { window.imInfo = eval("(" + rsp + ")"); if (imInfo.imShow) { $.getScript("/UserControls/Im/im.js?t=" + Math.random(), function () { writeIm(imInfo.imData); }); } else { $("#divOranIm").hide(); } }); }
$(function () { $("body").append("<div style='width:150px;z-index:10;' id='divOranIm'></div>"); imState(); });
/*在线客服结束*/


function xuanze() { var a = document.getElementById("seachkeywords").value; if (a == "请输入关键词搜索") { a = "" } window.location.href = "/Search/Index.aspx?objtype=product&kwd=" + a } $(function () { $("div.menu li:first").addClass("cur"); $("#seachkeywords").val("请输入关键词搜索").css({ opacity: "#fff" }); $("#seachkeywords").click(function () { $(this).val("").css({ color: "#fff" }) }).blur(function () { if ($.trim($(this).val()) == "") { $(this).val("请输入关键词搜索").css({ color: "#fff" }) } }) });

/*主导航高亮 end*/
$(function () {

    $("#seachkeywords").keypress(function (e) {
        var x = e;
        var e = x || window.event;
        if (e.keyCode == 13) {
            xuanze();
        }
    });

    //SelectMenu(); //调用主导航高亮方法

    if (typeof (SID) != "undefined") {
        if (SID) {
            var div = $("div.lis_l:first,div.ps01");
            if (SID.length < 10) {//一级分类

            }
            div.find("h3[sid='" + SID + "'],li[sid='" + SID + "']").addClass("cur");
        }
    }
    action();
    var key = "defvalue"
    $("div.form").find("input[" + key + "],textarea[" + key + "]").each(function () {
        var me = $(this);
        me.val(me.attr(key)).focus(function () {
            var me_ = $(this);
            if (this.value == me_.attr(key)) {
                this.value = '';
            }
        }).blur(function () {
            var me_ = $(this);
            if (this.value == "") {
                this.value = me_.attr(key);
            }
        });
        if (me.hasClass("keypress") && me.attr("button")) {
            me.keypress(function (event) {
                if (event.keyCode == '13') {
                    var button = $(this).attr("button");
                    if (button.indexOf('(') > 0) {//执行的方法
                        eval("(" + button + ")");
                    } else {
                        $(button).click();
                    }
                    return false;
                }
            });
        }
    })

})

function reScrollPic(b, g, e, c, f, a, d) { var b = new ScrollPicleft(); b.scrollContId = g; if (e != null || c != null) { b.arrLeftId = e; b.arrRightId = c } b.frameWidth = f; b.speed = 10; b.space = 10; b.autoPlay = true; if (d != null) { b.pageWidth = 1; b.autoPlayTime = 0.03 } else { b.pageWidth = a; b.autoPlayTime = 2 } b.initialize() }; function nanOnly(a) { a.value = a.value.replace(/[^0-9]/g, "") }

/*头部导航选中JS*/





$(function () {

    var newsDefaultURL = 4;
    var productDefaultURL = 2;
    var agentDefaultURL = 3;
    var helpDefaultURL = 9;
    var projectDefaultURL = 1;
    var downloadDefaultURL = 0;
    var jobDefaultURL = 0;
    var current = "";
    var $menu = $("div.header ul");
    var _cur = "cur";
    $menu.find("li a").removeClass(_cur);
    $menu.find("li").removeClass(_cur);
    var Obj = new Object();
    Obj.getCurrentURL = function () {
        switch (MARK) {
            case "product": current = productDefaultURL ? productDefaultURL : MARK; break;
            case "news": current = newsDefaultURL ? newsDefaultURL : MARK; break;
            case "project": current = projectDefaultURL ? projectDefaultURL : MARK; break;
            case "agent": current = agentDefaultURL ? agentDefaultURL : MARK; break;
            case "help": current = helpDefaultURL ? helpDefaultURL : MARK; break;
            case "download": current = downloadDefaultURL ? downloadDefaultURL : MARK; break;
            case "job": current = jobDefaultURL ? jobDefaultURL : MARK; break;
            default: current = MARK; break;
        }

        return current;
    }
    Obj.firstLiCur = function () {

        $menu.find("li:first").addClass(_cur);
    }

    Obj.selectedCur = function () {
        var $o = $menu.find("a");
        var len = $o.length;
        var loc = window.location.href.toLowerCase();

        loc = loc.substring(loc.lastIndexOf("/") + 1);

        if (loc != "") {
            var $mx = null; //记录面包屑匹配的当前对象
            for (var i = 0; i < len; i++) {
                var _href = $o.eq(i).attr("href").toLowerCase();
                _href = _href.substring(_href.lastIndexOf("/") + 1);

                if (_href == loc) {
                    var oj = $o.eq(i).parent();

                    while (oj.get(0).tagName.toLowerCase() != 'li') {
                        oj = oj.parent();
                    }
                    oj.addClass(_cur);
                    break;
                }
                else {      //导航没有对应的链接刚从面包屑读取
                    if ($(".plc").find("a:[href='" + $o.eq(i).attr("href").toLowerCase() + "']").size() > 0) {
                        $o.eq(i).parent().addClass("cur");
                        break;
                    }


                }
            }

        }
        else {
            Obj.getCurrentURL();
            if (typeof (current) == "number") {
                $menu.children("li:eq(" + current + ")").addClass(_cur);
                $menu.children("li:eq(" + current + ")").find("a").addClass(_cur);
                return;

            }
        }

        //        $menu.find("a").each(function () {
        //            var _href = $(this).attr("href").toLowerCase();
        //            _href = _href.substring(_href.lastIndexOf("/") + 1);
        //            var loc = window.location.href.toLowerCase();
        //            loc = loc.substring(loc.lastIndexOf("/") + 1);

        //            if (loc != "") {

        //                if (_href == loc) {
        //                    $(this).parent("li").addClass(_cur);
        //                    $(this).parent("li").find("a").addClass(_cur);
        //                    alert("中了");
        //                }
        //            }
        //            else {
        //                alert("no");

        //                Obj.getCurrentURL();
        //                if (typeof (current) == "number") {
        //                    $menu.children("li:eq(" + current + ")").addClass(_cur);
        //                    $menu.children("li:eq(" + current + ")").find("a").addClass(_cur);
        //                    return;

        //                }
        //            }

        //        });
    }

    Obj.selectedTxtCur = function () {

        $menu.find("a").each(function () {
            var _txt = $.trim($(this).text());
            if (_txt == txt) {
                $(this).addClass(_cur);

                return;
            }
        });

        return $menu.find("li." + _cur);
    }

    Obj.hasCur = function () {
        var _hascur = $menu.find("li." + _cur).size();

        return _hascur;
    }


    if (typeof (MARK) == 'undefined') {

        Obj.firstLiCur();
        return;
    }

    if (!Obj.hasCur()) {
        current = MARK;

        Obj.selectedCur();

        if (!Obj.hasCur()) {

            Obj.firstLiCur();
        }
    }
    else {

    }

});


//首页发送留言
function IndexsendLeaveword2(src) {

    var PTN_EMAIL = /\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/;
    var PTN_FLOAT = /\d+(\.\d+)?/;
    var stxtContact = $j("txtContact").val() == $j("txtContact").attr("name") ? "" : $j("txtContact").val();   //昵称
    var msgType = $("input:radio[checked=checked]").val(); //贷款类型
    var money = $j("txtMoney").val(); //贷款金额
    var dtime = $j("txtTime").val(); //贷款时间
    var address_1 = $j("txtAddress_ddlPrtRegions").find('option:selected').text(); //省
    var address_2 = $j("txtAddress_ddlChdRegions").find('option:selected').text(); //市
    var stxtEmail = $j("txtEmail").val() == $j("txtEmail").attr("name") ? "" : $j("txtEmail").val();
    var stxtMobileNo = $j("txtPhone").val() == $j("txtPhone").attr("name") ? "" : $j("txtPhone").val();
    var stxtContent = $j("txtCmtContent").val() == $j("txtCmtContent").attr("name") ? "" : $j("txtCmtContent").val(); // 内容
    var verCode = $j("txtVerCode").val() == $j("txtVerCode").attr("name") ? "" : $j("txtVerCode").val();
    var err = "";


    var reg = /^\s*$/;

    if (reg.test(stxtContact)) {
        err += "<p>联系人不可为空</p>";
    }
    if (reg.test(stxtMobileNo)) {
        err += "<p>手机号不可为空</p>";
    }

    if (reg.test(stxtEmail)) {
        err += "<p>电子邮箱地址不可为空</p>";
    }

    //    var reg = new RegExp(/^\d*\.?\d{0,2}$/);
    //    if (!reg.test(money)) {
    //        
    //        err+="<p>请正确输入付款金额</p>";
    //        $j("txtMoney").focus();
    //        
    //    }
    //    if (Number(money) < 1000.00) {
    //        err += "<p>付款金额最小是1000.00</p>";
    //        $j("txtMoney").focus();
    //        
    //    }
    //    if (reg.test(dtime)) {
    //        err += "<p>请填预约时间</p>";
    //    }

    //    if (title == "") {
    //        err += "<li>主题不能为空</li>";
    //    }
    if (stxtContent == "" || stxtContent == "请输入1800字内…") {
        err += "<li>需求信息</li>";
    }
    //    if ($j("txtAddress_ddlChdRegions").val() == -1) {
    //        err += "<li>请填写所在地区</li>";
    //    }

    var partten = /^1[3,5,6,8]\d{9}$/;
    if (!partten.test(stxtMobileNo)) {
        err += "<p>手机号格式错误</p>";
    }
    var ptn = /\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/;
    if (!ptn.test(stxtEmail)) {
        err += "<p>电子邮箱地址格式错误</p>";
    }

    if (reg.test(verCode)) {
        err += "<p>请填写验证码</p>";
    }


    if (err.length > 0) {

        $a(err);

        return false;
    }
    showProc(src);
    $.post("/ajax.ashx?action=IndexsendLeaveword&t=" + Math.random(), {
        contact: stxtContact,
        dtime: dtime,
        email: stxtEmail,
        money: money,
        content: stxtContent,
        verCode: verCode,
        msgType: msgType,
        mobileno: stxtMobileNo

    }, function (msg) {
        var sta = gav(msg, "state");
        var sMsg = gav(msg, "msg");
        if (sta == "1") {
            emptyText();
            $a(sMsg, 1);

        } else {
            $a(sMsg);

        }
        showProc(src, false);
    });

}

/*输入框提示*/
$(document).ready(function () {

    $(".manage li").hover(function () {
        $(this).addClass('cur');
    }, function () {
        $(this).removeClass('cur');
    });

    $(".manage li").hover(function () {
        $(this).find('i').show();
    }, function () {
        $(this).find('i').hide();
    });

    $(".dh_you").find("input,textarea").bind("focus", function () {
        if ($(this).attr("name") == "") {
            $(this).attr("name", $(this).val());
        }
        if ($(this).attr("name") == $(this).val()) {
            $(this).val("");
        }

    }).bind("blur", function () {
        if ($(this).val() == "") {
            $(this).val($(this).attr("name"));
        }

    });
    $(".dh_you").find("input,textarea").each(function (i, j) {
        $(j).val($(j).attr("name"));
    });

})


/*  xsl 下拉二维码JS (2015-10-17) */
function xShow(o, obj) {
    $(o).css({ "position": "relative", "z-index": 999 });
    var b_h = document.documentElement.clientHeight; //浏览器可见高度
    var b_w = document.documentElement.clientWidth; //浏览器可见宽度

    $(o).addClass("cur");

    if ($(obj).css("left") == "auto") {
        $(obj).css({ "position": "absolute", "left": "0", "top": o.offsetHeight - 1 }).show();
        var left = $(obj).get(0).getBoundingClientRect().right < b_w ? 0 : b_w - $(obj).get(0).getBoundingClientRect().right;
        $(obj).animate({ "left": left }, function () {
            $(o).bind("mouseout", function () {
                $(obj).hide();
                $(o).removeClass("cur");

            })
        });
    } else {
        $(obj).show();
    }

}

function xShow2(o, obj) {

    var oo = document.getElementById(obj)

    var t = document.documentElement.scrollTop || document.body.scrollTop;
    var l = document.documentElement.scrollLeft || document.body.scrollLeft;
    oo.style.left = o.getBoundingClientRect().right - 110 + l + "px";
    oo.style.top = o.getBoundingClientRect().top + t - 5 + "px";
    oo.style.display = "block";
    $("." + obj).bind("mouseleave", function () {
        $(this).hide();
    })

}

function emptyText(cntrId) {
    var jTxts;

    if (cntrId == null) {
        jTxts = $("body").find("input[type=text]");

    } else {
        jTxts = $j(cntrId).find("input[type=text]");

    }
    var jTxtss;
    if (cntrId == null) {
        jTxtss = $("body").find("input[type=password]");
    } else {
        jTxtss = $j(cntrId).find("input[type=password]");
    }
    jTxts.each(function () {
        $(this).attr("value", "");
    });
    jTxtss.each(function () {
        $(this).attr("value", "");
    });
    if (cntrId == null)
        jTxts = $("body").find("textarea");
    else
        jTxts = $j(cntrId).find("textarea");
    jTxts.each(function () {
        $(this).attr("value", "");
    });
};

