<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>XXX高级定制旅游</title>
		<meta name="description" content="">
        <meta name="keywords" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="css/bootstrap.min.css" type="text/css"/>
		<link rel="stylesheet" href="css/animate.min.css" type="text/css" />
		<link rel="stylesheet" href="css/style.css" type="text/css"  />
		<link href="images/favicon.ico" type="image/x-icon" rel="shortcut icon"/>
		<script type="text/javascript" src="js/jquery-1.10.2.min.js"></script>
		<script type="text/javascript" src="js/bootstrap.min.js" ></script>
		<script type="text/javascript" src="js/nav.js" ></script>
		<script type="text/javascript" src="js/popup.mini.js"></script>
		
	</head>
	<body class="personal">
		<header id="head">
			<div class="container">
				<div class="fadeInLeft wow"><a class="logo" href="index.html"><img src="images/logo.png"/></a></div>
				<div id="nav" class="fadeInRight animated">
					  <ul>
					    <li><a href="index.html">首　页<span>HOME</span></a></li>
					    <li ><a href="lifeserver.html">俱乐部服务<span>Rave Club Service</span></a>
					      <ul>
					        <li><a href="lifeserver.html">生活服务</a></li>
					   	  	<li><a href="service.html">出行服务</a></li>
					   	  	<li><a href="business.html">事业服务</a></li>
					      </ul>
					    </li>
					    <li class="active"><a href="personal.html">私人定制<span>Yc Travel</span></a>
					    <li ><a href="member.html">会员申请<span>Membership Application</span></a></li>
					  </ul>
				</div>
				<div class="zhuan"><img src="images/zhuan.png"/></div>
			</div>
		</header>
		<div class="container">
			<!-- 定制区域 -->
		<div class="order-wrap">
			<div class="order-box clearfix">
				<div class="wl fl">
					<div class="form-wrap r4">
						<div class="form-hd">
							<h2 class="h-h">XXX私人定制</h2>
							<p class="h-p"><i class="h-i1"></i><span>就是如此简单</span><i class="h-i2"></i></p>
						</div>
						<div class="form-bd">
							<div class="main-form">
								<div id="dest_form" class="form-item r4 f-destination clearfix">
									<i class="f-i i-dest"></i>
									<span id="dest_tip" class="intro">想去哪儿</span>
									<div class="f-dest-l">
										<input name="destination" id="destination" type="hidden" class="form-input2" style="width:330px;border:solid 1px #CCCCCC;" maxleng="90">
									</div>
									<div id="dest_errmsg" class="validation-tips" style="display:none;">
										<p>请填写或选择目的地</p>
									</div>
									<!-- 验证提示 -->
									<!-- 目的地 -->
									<div id="dest_all" class="destination-list r4" style="display:none; ">
										<span id="dest_close" class="dest-close" style="cursor::pointer;"></span>
										<div id="dest_box" class="dest-box">
											<div class="dest-hd">
												<ul id="menu_head" class="dest-tab clearfix">
													<li><span>热门</span></li>
													<li><span>国内</span></li>
													<li><span>欧洲</span></li>
													<li><span>亚洲</span></li>
													<li><span>美洲</span></li>
													<li><span>海岛</span></li>
													<li><span>大洋洲</span></li>
													<li><span>中东非洲</span></li>
												</ul>
											</div>
											<div id="area_list" class="dest-bd">
												<ul class="dest-cont" style="display:none;">
													<li><a href="javascript:void(0)"><span>英国</span></a></li>
													<li><a href="javascript:void(0)"><span>捷克</span></a></li>
													<li><a href="javascript:void(0)"><span>瑞士</span></a></li>
													<li><a href="javascript:void(0)"><span>意大利</span></a></li>
													<li><a href="javascript:void(0)"><span>奥地利</span></a></li>
													<li><a href="javascript:void(0)"><span>德国</span></a></li>
													<li><a href="javascript:void(0)"><span>法国</span></a></li>
													<li><a href="javascript:void(0)"><span>西班牙</span></a></li>
													<li><a href="javascript:void(0)"><span>俄罗斯</span></a></li>
													<li><a href="javascript:void(0)"><span>日本</span></a></li>
													<li><a href="javascript:void(0)"><span>台湾</span></a></li>
													<li><a href="javascript:void(0)"><span>泰国</span></a></li>
													<li><a href="javascript:void(0)"><span>巴厘岛</span></a></li>
													<li><a href="javascript:void(0)"><span>大溪地</span></a></li>
													<li><a href="javascript:void(0)"><span>毛里求斯</span></a></li>
													<li><a href="javascript:void(0)"><span>美国</span></a></li>
													<li><a href="javascript:void(0)"><span>加拿大</span></a></li>
													<li><a href="javascript:void(0)"><span>南非</span></a></li>
													<li><a href="javascript:void(0)"><span>北京</span></a></li>
													<li><a href="javascript:void(0)"><span>黄山</span></a></li>
													<li><a href="javascript:void(0)"><span>九寨沟</span></a></li>
													<li><a href="javascript:void(0)"><span>丽江</span></a></li>
													<li><a href="javascript:void(0)"><span>西双版纳</span></a></li>
													<li><a href="javascript:void(0)"><span>西藏</span></a></li>
												</ul>
												<ul class="dest-cont" style="display:none;">
													<li><a href="javascript:void(0)"><span>北京</span></a></li>
													<li><a href="javascript:void(0)"><span>黄山</span></a></li>
													<li><a href="javascript:void(0)"><span>桂林</span></a></li>
													<li><a href="javascript:void(0)"><span>九寨沟</span></a></li>
													<li><a href="javascript:void(0)"><span>丽江</span></a></li>
													<li><a href="javascript:void(0)"><span>张家界</span></a></li>
													<li><a href="javascript:void(0)"><span>厦门</span></a></li>
													<li><a href="javascript:void(0)"><span>三亚</span></a></li>
													<li><a href="javascript:void(0)"><span>扬州</span></a></li>
													<li><a href="javascript:void(0)"><span>无锡</span></a></li>
													<li><a href="javascript:void(0)"><span>重庆</span></a></li>
													<li><a href="javascript:void(0)"><span>西安</span></a></li>
													<li><a href="javascript:void(0)"><span>香格里拉</span></a></li>
													<li><a href="javascript:void(0)"><span>西双版纳</span></a></li>
													<li><a href="javascript:void(0)"><span>贵州</span></a></li>
													<li><a href="javascript:void(0)"><span>西藏</span></a></li>
													<li><a href="javascript:void(0)"><span>宁夏</span></a></li>
													<li><a href="javascript:void(0)"><span>新疆</span></a></li>
													<li><a href="javascript:void(0)"><span>青海</span></a></li>
												</ul>
												<ul class="dest-cont" style="display:none;">
													<li><a href="javascript:void(0)"><span>意大利</span></a></li>
													<li><a href="javascript:void(0)"><span>德国</span></a></li>
													<li><a href="javascript:void(0)"><span>法国</span></a></li>
													<li><a href="javascript:void(0)"><span>西班牙</span></a></li>
													<li><a href="javascript:void(0)"><span>葡萄牙</span></a></li>
													<li><a href="javascript:void(0)"><span>希腊</span></a></li>
													<li><a href="javascript:void(0)"><span>瑞士</span></a></li>
													<li><a href="javascript:void(0)"><span>奥地利</span></a></li>
													<li><a href="javascript:void(0)"><span>匈牙利</span></a></li>
													<li><a href="javascript:void(0)"><span>荷兰</span></a></li>
													<li><a href="javascript:void(0)"><span>比利时</span></a></li>
													<li><a href="javascript:void(0)"><span>英国</span></a></li>
													<li><a href="javascript:void(0)"><span>摩纳哥</span></a></li>
													<li><a href="javascript:void(0)"><span>卢森堡</span></a></li>
													<li><a href="javascript:void(0)"><span>波兰</span></a></li>
													<li><a href="javascript:void(0)"><span>芬兰</span></a></li>
													<li><a href="javascript:void(0)"><span>挪威</span></a></li>
													<li><a href="javascript:void(0)"><span>瑞典</span></a></li>
													<li><a href="javascript:void(0)"><span>丹麦</span></a></li>
													<li><a href="javascript:void(0)"><span>捷克</span></a></li>
													<li><a href="javascript:void(0)"><span>俄罗斯</span></a></li>
													<li><a href="javascript:void(0)"><span>冰岛</span></a></li>
												</ul>
												<ul class="dest-cont" style="display:none;">
													<li><a href="javascript:void(0)"><span>韩国</span></a></li>
													<li><a href="javascript:void(0)"><span>日本</span></a></li>
													<li><a href="javascript:void(0)"><span>泰国</span></a></li>
													<li><a href="javascript:void(0)"><span>新加坡</span></a></li>
													<li><a href="javascript:void(0)"><span>柬埔寨</span></a></li>
													<li><a href="javascript:void(0)"><span>斯里兰卡</span></a></li>
													<li><a href="javascript:void(0)"><span>尼泊尔</span></a></li>
													<li><a href="javascript:void(0)"><span>不丹</span></a></li>
													<li><a href="javascript:void(0)"><span>印度</span></a></li>
													<li><a href="javascript:void(0)"><span>越南</span></a></li>
													<li><a href="javascript:void(0)"><span>菲律宾</span></a></li>
													<li><a href="javascript:void(0)"><span>马来西亚</span></a></li>
													<li><a href="javascript:void(0)"><span>沙巴</span></a></li>
													<li><a href="javascript:void(0)"><span>土耳其</span></a></li>
												</ul>
												<ul class="dest-cont" style="display:none;">
													<li><a href="javascript:void(0)"><span>加拿大</span></a></li>
													<li><a href="javascript:void(0)"><span>美国</span></a></li>
													<li><a href="javascript:void(0)"><span>墨西哥</span></a></li>
													<li><a href="javascript:void(0)"><span>阿根廷</span></a></li>
													<li><a href="javascript:void(0)"><span>巴西</span></a></li>
													<li><a href="javascript:void(0)"><span>古巴</span></a></li>
													<li><a href="javascript:void(0)"><span>秘鲁</span></a></li>
													<li><a href="javascript:void(0)"><span>智利</span></a></li>
													<li><a href="javascript:void(0)"><span>玻利维亚</span></a></li>
													<li><a href="javascript:void(0)"><span>厄瓜多尔</span></a></li>
													<li><a href="javascript:void(0)"><span>哥斯达黎加</span></a></li>
													<li><a href="javascript:void(0)"><span>南极</span></a></li>
												</ul>
												<ul class="dest-cont" style="display:none;">
													<li><a href="javascript:void(0)"><span>巴厘岛</span></a></li>
													<li><a href="javascript:void(0)"><span>普吉岛</span></a></li>
													<li><a href="javascript:void(0)"><span>苏梅岛</span></a></li>
													<li><a href="javascript:void(0)"><span>马尔代夫</span></a></li>
													<li><a href="javascript:void(0)"><span>帕劳</span></a></li>
													<li><a href="javascript:void(0)"><span>沙巴</span></a></li>
													<li><a href="javascript:void(0)"><span>长滩岛</span></a></li>
													<li><a href="javascript:void(0)"><span>塞班岛</span></a></li>
													<li><a href="javascript:void(0)"><span>夏威夷</span></a></li>
													<li><a href="javascript:void(0)"><span>塞舌尔</span></a></li>
													<li><a href="javascript:void(0)"><span>大溪地</span></a></li>
													<li><a href="javascript:void(0)"><span>萨摩亚</span></a></li>
													<li><a href="javascript:void(0)"><span>斐济</span></a></li>
													<li><a href="javascript:void(0)"><span>毛里求斯</span></a></li>
												</ul>
												<ul class="dest-cont" style="display:none;">
													<li><a href="javascript:void(0)"><span>澳大利亚</span></a></li>
													<li><a href="javascript:void(0)"><span>新西兰</span></a></li>
													<li><a href="javascript:void(0)"><span>萨摩亚</span></a></li>
												</ul>
												<ul class="dest-cont" style="display:none;">
													<li><a href="javascript:void(0)"><span>迪拜</span></a></li>
													<li><a href="javascript:void(0)"><span>南非</span></a></li>
													<li><a href="javascript:void(0)"><span>肯尼亚</span></a></li>
													<li><a href="javascript:void(0)"><span>以色列</span></a></li>
												</ul>
											</div>
										</div>
										<div class="dest-btns">
											<a id="dest_confirm" href="javascript:void(0)" class="btn-confirm r4">确&nbsp;&nbsp;定</a>
										</div>
									</div>
									<!-- pop end -->
								</div>
								<div id="friend_form" class="form-item r4 f-with clearfix">
									<i class="f-i i-with"></i>
									<span class="intro">和谁去</span>
									<div id="friend_list" class="f-rbox clearfix">
										<div class="f-cell">
											<div class="f-radio"><i class="f-rd-icon"></i><span>老人</span></div>
										</div>
										<div class="f-cell">
											<div class="f-radio"><i class="f-rd-icon"></i><span>孩子</span></div>
										</div>
										<div class="f-cell">
											<div class="f-radio"><i class="f-rd-icon"></i><span>朋友</span></div>
										</div>
									</div>

								</div>
								<div id="date_form" class="form-item r4 f-time clearfix">
									<i class="f-i i-time"></i>
									<span class="intro">什么时候去</span>
									<div class="f-rbox clearfix">
										<div class="f-cell">
											<div id="show_year" rel="" class="f-drop">
												<span class="f-drop-sp"></span><em class="f-toggle"></em>
											</div>
											<!-- 年 -->
											<div id="year_list" class="f-pop-wrap" style="display:none">
												<ul class="year-list clearfix"></ul>
											</div>
											<!-- end -->
										</div>
										<div class="f-cell">
											<div id="show_month" rel="none" class="f-drop">
												<span class="f-drop-sp">不确定</span><em class="f-toggle"></em>
											</div>
											<!-- 月 -->
											<div id="month_list" class="f-pop-wrap" style="display:none">
												<ul class="month-list clearfix"></ul>
											</div>
											<!-- end -->
										</div>
										<div class="f-cell">
											<div id="show_day" rel="none" class="f-drop">
												<span class="f-drop-sp">不确定</span><em class="f-toggle"></em>
											</div>
											<!-- 日 -->
											<div id="day_list" class="f-pop-wrap" style="display:none">
												<ul class="date-list clearfix"></ul>
											</div>
											<!-- end -->
										</div>
									</div>
									 <div id="day_errmsg" class="validation-tips"><p>请选择日期(如不确定时间，请选择不确定)</p></div><!-- 验证提示 -->
								</div>
							</div>
							<div class="f-btns">
								<button type="button" id="confirm_btn" class="f-btn-normal r4">开启我的定制之旅</button>
								<input type="hidden" name="member_id" id="member_id" value="">
								<input type="hidden" name="localtype" id="localtype" value="simple">
							</div>
						</div>
					</div>
				</div>
				<div class="wr">
				    <div class="append-hint">
						<p class="headline">简单三步<em>免费旅行定制</em></p>
						<div class="info">
						<div class="flow-funs">
						<i class="icon-pchelper-n3"></i>
						
						</div>
						</div>
						<div class="bottom">
						<p class="p1"><i class="icon-pchelper-n4"></i></p>
						<p class="p2"><i class="icon-pchelper-n2"></i>XXX</p>
						<p class="p3"><a href="javascript:void(0)" class="webim-online-click"><i class="icon-pchelper-n1"></i></a></p>
						</div>
					</div>
				
			</div>
			
		<!-- 定制区域 End -->
		<!-- 联系方式弹层 -->
		<div id="contact_mask" class="order-pop-mask" style="display:none"></div>
		<div id="contact_box" class="order-pop-wrap r10" style="display:none">
			<!--<a id="contact_close" href="javascript:void(0)" class="order-pop-close">关闭</a>-->
			<div class="order-pop-box">
				<div class="order-pop-hd">
					<h2 class="hd-h2">您的需求已提交！</h2>
					<p class="hd-p1"><span>请完善以下信息</span></p>
				</div>
				<div class="order-pop-bd">
					<div class="main-form pop-form">
						<div id="realname_form" class="form-item r4 f-name clearfix">
							<span class="intro">微信号</span>
							<input name="realname" id="realname" type="text" class="form-input" maxlength="20">
							<em id="name_ico" class="validation-icon"></em>
							<!-- 验证图标 -->
							<div id="name_errmsg" class="validation-tips" style="display:none;">
								<p>请填写您的姓名</p>
							</div>
							<!-- 验证提示 -->
						</div>
						<div id="mobile_form" class="form-item r4 f-phone clearfix">
							<span class="intro">手机号</span>
							<input name="mobile" id="mobile" type="text" class="form-input" maxlength="11">
							<em id="mobile_ico" class="validation-icon"></em>
							<!-- 验证图标 -->
							<div id="mobile_errmsg" class="validation-tips" style="display:none;">
								<p>请填写您的手机号码</p>
							</div>
							<!-- 验证提示 -->
						</div>
					</div>
					<div class="pop-btns">
						<a href="javascript:void(0)" id="submit_btn" class="btn-confirm r4 btn-block f20">填好了！</a>
					</div>
				</div>
			</div>
		</div>
	<!-- 二维码弹层 -->
		<div id="qrcode_mask" class="order-pop-mask" style="display:none"></div>
		<div id="qrcode_box" class="order-pop-wrap r10" style="display:none">
		    <a href="javascript:void(0)" class="order-pop-close">关闭</a>
		    <div class="order-pop-box">
		        <div class="order-pop-hd">
		            <h2 class="hd-h2">您的需求已提交！</h2>
		            <p class="hd-p2">顾问会尽快跟您联系<br/>或微信直接和顾问在线沟通</p>
		        </div>
		        <div class="order-pop-bd">
		            <div class="qrcode-area">
		                <img id="wx_login_img" src="images/loading188x188.gif" alt="6人游旅行顾问二维码" />
		                <span class="icon-sao"></span>
		            </div>
		        </div>
		    </div>
		</div>
		<!-- 普通弹层 -->
		<div id="success_mask" class="order-pop-mask" style="display:none"></div>
		<div id="success_box" class="order-pop-wrap r10" style="display:none">
		    <a id="success_close" href="javascript:void(0)" class="order-pop-close">关闭</a>
		    <div class="order-pop-box">
		        <div class="order-pop-hd">
		            <h2 class="hd-h2">您的需求已提交！</h2>
		            <p class="hd-p2">顾问会尽快跟您联系<br/>或微信直接和顾问在线沟通</p>
		        </div>
		        <div class="pop-btns">
		            <a href="/" class="btn-confirm r4 btn-block f20">关 闭</a>
		        </div>
		    </div>
		</div>
		<div id="error_mask" class="order-pop-mask" style="display:none"></div>
		<div id="error_box" class="order-pop-wrap r10" style="display:none">
		    <a href="javascript:void(0)" class="order-pop-close">关闭</a>
		    <div class="order-pop-box">
		        <div class="order-pop-hd">
		            <h2 class="hd-h2">您的需求提交失败！</h2>
		        </div>
		    </div>
		</div>
	</div>
	<!-- 我们的优势 -->
			<div class="our-wrap">
				<div class="our-hd">
					<span class="our-tit">我们的优势</span>
				</div>
				<div class="our-bd clearfix">
					<!-- 出发前 -->
					<dl class="our-item">
						<dt><span class="our-i-1"><img src="images/kefu.png"/></span></dt>
						<dd>
							<p class="our-text">微信/电话全面了解您的需求</p>
							<p class="our-text">专业顾问量身设计您的线路</p>
							<p class="our-text">帮您搭配性价比最好的资源</p>
							<p class="our-text">随时随地微信沟通快捷方便</p>
							<p class="our-text">专车接送贴心服务细致入微</p>
						</dd>
					</dl>
					<!-- 旅途中 -->
					<dl class="our-item">
						<dt><span class="our-i-2"><img src="images/airplan.png"/></span></dt>
						<dd>
							<p class="our-text">全程专车专导，行程随需随时调整</p>
							<p class="our-text">只和亲友同行，不和陌生人拼团</p>
							<p class="our-text">全程免费WIFI，随时与世界连接</p>
							<p class="our-text">提供高额救援险，快速处理突发事件</p>
							<p class="our-text">24小时旅行管家在线服务</p>
						</dd>
					</dl>
					<!-- 归程后 -->
					<dl class="our-item no-mg">
						<dt><span class="our-i-3"><img src="images/gift.png"/></span></dt>
						<dd>
							<p class="our-text">主动回访问候客户</p>
							<p class="our-text">以用户满意度考评服务水平</p>
							<p class="our-text">如不满意，主动补贴客户</p>
						</dd>
					</dl>
				</div>
			</div>
		</div>
		</div>
		<!--二维码扫描-->
		    <div class="side_code">
				<div class="code_div" id="div1" style="background-color: rgb(218, 184, 102);">
					<em class="icon_code2 code1"></em>
					<a href="javascript:;" class="code_top"></a>
				</div>
				<div class="code_div code_div2" id="div2" onclick="window.scrollTo(0,0);return false;">
					<em class="icon_code2 code2" id="em1" style="display: block;"></em>
				</div>
		    </div>
			<div class="side_code side_left" style="display: block;"><em id="qrCode" class="icon_code code3"> </em>
				<div class="code_hhtravel"><em class="icon_code1 code4"></em></div>
				<!--<span>关注官方微信<br>接收最新资讯</span>-->
				<div class="icon_arrow2"></div>
			</div>
		    <!--二维码扫描-->
	    <div class="copyright">
		    	Copyright©2020　XXX高端定制旅游　版权所有　<a href="http://www.miitbeian.gov.cn/publish/query/indexFirst.action;jsessionid=FkTTXdKpX27NtbKMM7hfJcJK13JS1JYvDvWLJZqnh8CX1BpJlJhx!871614666" target="_blank">粤ICP备123456789号</a>
	    </div>
	      <!--弹出框-->
            <div class="popWeixin">
			    <em class="closeWeixin popup-close">×</em>
			    <div class="weixin_qr">
			        <div class="qr_line1">
			            <img id="CSPhoto" src="images/logomain5.png">
			            <div class="weixinline">
			                <div class="weixin_icon icon_img"></div><div class="weixindesc">微信私人客服</div>
			            </div>
			            <div class="weixinline2" id="CSName">客服一</div>
			        </div>
			        <div class="erweima">
			            <img src=" images/arrow.png" class="weixinarrow">
			            <img id="siderWeixinBigImg" src="images/icon_code.png" alt="请在微信中搜索'XXX'添加私人客服">
			            <div class="erweima_desc">微信扫码加好友，在线咨询</div>
			        </div>
			    </div>
			    <div class="workingTime">
			        <img src="images/yc.jpg">
			    </div>
			</div>
			<script type='text/javascript'>
				(function(){
					 new PopUp_api({el:'.side_left',html:'.popWeixin'});
				})()
			</script>
		<script src="js/jquery.min.js"></script>
		<script type="text/javascript" src="js/jquery.tagsinput.js"></script>
		<script type="text/javascript" src="js/jquery.colorbox-min.js"></script>
	    <script type="text/javascript">
    stopFlag = true;
    var destFlag = false;
    var contactFlag = false;
    var selectArr = [];
    var $destination = $("input[name=destination]");
    var $destConfirm = $("#dest_confirm");
    var $menuHead = $("#menu_head");
    var $destAll = $("#dest_all");
    var $destClose = $("#dest_close");
    var $areaList = $("#area_list");
    var $areaListChild = $areaList.find("ul.dest-cont");
    var $friendList = $("#friend_list");
    var $yearList = $("#year_list");
    var $monthList = $("#month_list");
    var $dayList = $("#day_list");
    var $year = $("#year");
    var $month = $("#month");
    var $day = $("#day");
    var $tripId = $("#trip_id");
    var $realname = $("#realname");
    var $token = $("#token");
    var $people = $("#people");
    var $destForm = $("#dest_form");
    var $friendForm = $("#friend_form");
    var $dateForm = $("#date_form");
    var $destMsg = $destForm.find("div.validation-tips p");
    var $friendMsg = $friendForm.find("div.validation-tips p");
    var $dateMsg = $dateForm.find("div.validation-tips p");
    var $realname = $("#realname");
    var $mobile = $("#mobile");
    var $realnameForm = $("#realname_form");
    var $mobileForm = $("#mobile_form");
    var $realnameMsg = $realnameForm.find("div.validation-tips p");
    var $mobileMsg = $mobileForm.find("div.validation-tips p");
    var $showYear = $("#show_year");
    var $showMonth = $("#show_month");
    var $showDay = $("#show_day");
    var $submitBtn = $("#submit_btn");
    var $errorMask = $("#error_mask");
    var $errorBox = $("#error_box");
    var $errorMsg = $errorBox.find("h2");
    //Tip
    var $destErrmsg = $("#dest_errmsg");
    var $friendErrmsg = $("#friend_errmsg");
    var $nameErrmsg = $("#name_errmsg");
    var $mobileErrmsg = $("#mobile_errmsg");
    var $dayErrmsg = $("#day_errmsg");
    //destination
    var $inputList = $("#input_list");
    var maxLen = 0;
    //Layer hide
    var destTimer = monthTimer = dayTimer = null;
    var hideTimeout = 1000;
    var jsonYear = ["2016",2017];
    var currMonth = "2016-5-6";
    var formToken = "053cd668a6618b519844345016fe63f5";
    var parseHtml = {
        init:function(){
            $areaList.find("ul.dest-cont:first").show();
            //this.setYearHtml(jsonYear);
            this.initDestination();
            this.initFriend();
            this.initDatetime();
            //Year
            var yearHtml = this.setYearHtml(jsonYear);
            $yearList.find("ul").html(yearHtml)
        },
        setYearHtml:function(yearArr){
            var htmlArr = [];
            for(var i in yearArr) {
                htmlArr.push('<li rel="'+yearArr[i]+'"><a href="javascript:void(0)" class="list-cell">'+yearArr[i]+'年</a></li>');
            }
            return htmlArr.join("");
        },
        alertLayer:function(errMsg){
            var $errorPop = $("#error_mask,#error_box");
            $errorPop.show();
            $errorMsg.html(errMsg);
            $errorPop.click(function(){
                $errorPop.hide();
            });
        },
     
        initDestination:function(){
            var optlen = $("div.tagsinput").find("span.tag").size();
            if(optlen>0) {
                var formH = $destForm.height();
                var cssH = (parseInt(formH) + 1) + "px";
                $destAll.css("top", cssH);
            }
        },
        initFriend:function(){
            var friendArr = [];
            $friendList.find("div.f-radio").each(function(){
                var $self = $(this);
                if($self.hasClass("f-radio-selected")) {
                    friendArr.push($.trim($self.text()));
                }
            });
            var friendLen = friendArr.length;
            if(friendLen<=0) {
                $friendForm.removeClass("form-error form-focus");
                return false;
            }
            $friendForm.removeClass("form-error").addClass("form-focus");
            $friendErrmsg.hide();
            $friendMsg.text("");
            return true;
        },
        initDatetime:function(){
            
        },
        initNameMobile:function(){
            $realnameForm.removeClass("form-focus form-error");
            $mobileForm.removeClass("form-focus form-error");
            $nameErrmsg.hide();
            $mobileErrmsg.hide();
        }
    };
    var YearMonth = {
        init:function() {
            this.setCurrYear();
            var htmlCode = this.getMonth();
            $monthList.find("ul").html(htmlCode);
           
        },
        setMonth:function(year){
            var dateJson = this.getCurrFormat();
            var fYear = this.formatNum(dateJson.year);
            var fMonth = this.formatNum(dateJson.month);
            var htmlArr = [];
            htmlArr.push('<li><a href="javascript:void(0)" class="list-cell not-sure">不确定</a></li>');
            var startMonth= (fMonth>0 && fYear==year) ? fMonth : 1;
            for(var i=startMonth; i<=12; i++) {
                htmlArr.push('<li rel="'+i+'"><a href="javascript:void(0)" class="list-cell">'+i+'月</a></li>');
            }
            return htmlArr.join("");
        },
        getMonth:function() {
            var dateJson = this.getCurrFormat();
            var fMonth = this.formatNum(dateJson.month);
            var htmlArr = [];
            htmlArr.push('<li rel="none"><a href="javascript:void(0)" class="list-cell not-sure">不确定</a></li>');
            var startMonth= fMonth>0 ? fMonth : 1;
            for(var i=startMonth; i<=12; i++) {
                htmlArr.push('<li rel="'+i+'"><a href="javascript:void(0)" class="list-cell">'+i+'月</a></li>');
            }
            return htmlArr.join("");
        },
        getDay:function() {
            var _month = this.getInputMonth();
            var _year = this.getInputYear();
            _month = parseInt(_month) - 1;
            var dateJson = this.getCurrFormat();
            var _currYear = this.formatNum(dateJson.year);
            var _currMonth = this.formatNum(dateJson.month);
            var _currDay = this.formatNum(dateJson.day);
            var _myTime = new Date(_year, _month, 1);
            var _maxDay = 28;
            for(var i=28;i<32;i++){
                _myTime.setDate(i);
                if(_myTime.getDate()==1){
                    break;
                }
                _maxDay = i;
            }
            var htmlArr = [];
            htmlArr.push('<li rel="none"><a href="javascript:void(0)" class="list-cell not-sure">不确定</a></li>');
            var _start = 1;
            if( _year==_currYear && (_month+1)==_currMonth ) _start = _currDay;
            for( var i=_start; i<=_maxDay; i++ ) {
                htmlArr.push('<li rel="'+i+'"><a href="javascript:void(0)" class="list-cell">'+i+'</a></li>');
            }
            return htmlArr.join("");
        },
        setDay:function(){
            var _html = this.getDay();
            selectDay.html(_html);
        },
        setCurrYear:function(){
            var dateJson = this.getCurrFormat();
            $showYear.attr("rel", dateJson.year).find("span").text(dateJson.year+"年");
        },
        getCurrFormat:function(){
            var pos = currMonth.indexOf("-");
            var dateJson = {"year":"", "month":"", "day":""}
            if(-1!=pos) {
                var dateArr = currMonth.split("-");
                dateJson.year = dateArr[0];
                dateJson.month = dateArr[1];
                dateJson.day = dateArr[2];
            }
            return dateJson;
        },
        getInputYear:function(){
            var year = $.trim($showYear.attr("rel"));
            return this.formatNum(year);
        },
        getInputMonth:function(){
            var month = $.trim($showMonth.attr("rel"));
            return ("none"==month) ? month : this.formatNum(month);
        },
        getInputDay:function(){
        },
        formatNum:function(sNum){
            return (!sNum || isNaN(sNum)) ? 0 : parseInt(sNum);
        }
    };
    $(document).ready(function(){
        $('input[name=destination]').tagsInput({
            "width":'auto',
            "height":"32px",
            "defaultText":"填写目的地",
            "placeholderColor":"#999999",
            "delimiter": [',',' ','，','　']
        });
        parseHtml.init();
        YearMonth.init();
        $("#dest_tip,div.tagsinput").click(function(){
            $destAll.fadeIn("400");
        });
        $destAll.mouseover(function(){
            var $self = $(this);
            if(destTimer) {
                clearTimeout(destTimer);
                destTimer = null;
            }
        }).mouseout(function(){
            var $self = $(this);
            destTimer = setTimeout(function(){
                $destAll.fadeOut("400");
            }, hideTimeout);
        });
        $monthList.mouseover(function(){
            var $self = $(this);
            if(monthTimer) {
                clearTimeout(monthTimer);
                monthTimer = null;
            }
        }).mouseout(function(){
            var $self = $(this);
            monthTimer = setTimeout(function(){
                $monthList.fadeOut("400");
            }, hideTimeout);
        });
        $dayList.mouseover(function(){
            var $self = $(this);
            if(dayTimer) {
                clearTimeout(dayTimer);
                dayTimer = null;
            }
        }).mouseout(function(){
            var $self = $(this);
            dayTimer = setTimeout(function(){
                $dayList.fadeOut("400");
            }, hideTimeout);
        });
        $destClose.on({
            click:function(){
                $destAll.fadeOut("400");
            },
            mouseover:function(){
                $destAll.css('cursor', "pointer");
            }
        });
        $menuHead.on("mouseover", "li", function(){
            var $self = $(this);
            var sortIndex = $self.index();
            $self.addClass("tab-current").siblings().removeClass("tab-current");
            $areaListChild.eq(sortIndex).show().siblings().hide();
        });
        $areaList.on("click", "ul>li", function(){
            var inputdest = orderSave.getDestination();
            var inputArr = inputdest.split(",");
            var $self = $(this);
            var text = $.trim($self.text());
            if(-1==$.inArray(text,inputArr) && inputArr.length<10) {
                inputArr.push(text);
            }
            $destination.val(inputArr.join(","));
            $destination.importTags(inputArr.join(","));
            parseHtml.initDestination();
            orderSave.chkDestination();
        });
        $destConfirm.click(function(){
            var $selectHead = $menuHead.find("li.tab-current");
           
            orderSave.chkDestination();
            $destAll.fadeOut("200");
        });
        $friendList.on("click", "div.f-cell", function(){
            var $self = $(this);
            var $selected = $self.find("div.f-radio");
            var styleClass = "f-radio-selected";
            $selected.hasClass(styleClass) ? $selected.removeClass(styleClass) : $selected.addClass(styleClass);
            orderSave.chkFriend();
        });
        $showYear.click(function(){
            $yearList.fadeIn("400");
            $monthList.hide();
            $dayList.hide();
        });
        $yearList.on("click", "ul>li", function(){
            var $self = $(this);
            var existsYear = $showYear.attr("rel");
            var relYear = $self.attr("rel");
            var yearNum = $.isNumeric(relYear) ? parseInt($self.attr("rel")) : relYear;
            var txtYear = $.trim($self.text());
            $showYear.attr("rel", yearNum).find("span").text(txtYear);
            var htmlCode = YearMonth.setMonth(yearNum);
            $monthList.find("ul").html(htmlCode);
            if($.isNumeric(existsYear) && existsYear!=relYear) {
                $showMonth.attr("rel", "none").find("span").text("不确定");
                $showDay.attr("rel", "none").find("span").text("不确定");
            }
            $yearList.fadeOut("200");
            orderSave.chkBlurMonth();
        });
        $showMonth.click(function(){
            $monthList.fadeIn("400");
            var month = $.trim($showMonth.attr("rel"));
            var day = $.trim($showDay.attr("rel"));
            if(!$.isNumeric(month) && !$.isNumeric(day)) {
                $dateForm.addClass("form-focus");
                $dateMsg.text("请选择日期(如不确定时间，请选择不确定)");
                $dayErrmsg.show();
                return false;
            }
            $dateForm.removeClass("form-error").removeClass("form-error");
            $yearList.hide();
            $dayList.hide();
            $dayErrmsg.hide();
        });
        $monthList.on("click", "ul>li", function(){
            var existsMonth = $showMonth.attr("rel");
            var $self = $(this);
            var relMonth = $self.attr("rel");
            var monthNum = $.isNumeric(relMonth) ? parseInt($self.attr("rel")) : relMonth;
            var txtMonth = $.trim($self.text());
            $showMonth.attr("rel", monthNum).find("span").text(txtMonth);
          
            if(!$.isNumeric(relMonth)) {
                $showDay.attr("rel", "none").find("span").text("不确定");
                $dayList.find("ul").html("");
            }
            else{
                var htmlCode = YearMonth.getDay();
                $dayList.find("ul").html(htmlCode);
            }
            $monthList.fadeOut("200");
            orderSave.chkBlurMonth();
        });
        $showDay.click(function(){
            var month = YearMonth.getInputMonth();
            if("none"==month) {
                $dateForm.addClass("form-focus");
                $dateMsg.text("请先选择月份");
                $dayErrmsg.show();
                return false;
            }
            $dayList.fadeIn("400");
            $yearList.hide();
            $monthList.hide();
            $dayErrmsg.hide();
        });
        $dayList.on("click", "ul>li", function(){
            var $self = $(this);
            var dayNum = parseInt($self.attr("rel"));
            var txtDay = $.trim($self.text());
            txtDay += isNaN(txtDay) ? "" : "日";
            $showDay.attr("rel", dayNum).find("span").text(txtDay);
            $dayList.fadeOut("200");
            orderSave.chkBlurMonth();
        });
        $("#success_mask,#success_box").click(function(){
            $("#success_mask,#success_box").fadeOut("400");
        });
        $("#qrcode_mask,#qrcode_box").click(function(){
            $("#qrcode_mask,#qrcode_box").fadeOut("400");
            stopFlag = true;
            window.location.href = "/";
        });
        $("div.tagsinput input").on({
            blur:function(){
                parseHtml.initDestination();
                orderSave.chkDestination();
            },
            focus:function(){
                $destForm.addClass("form-focus").removeClass("form-error");
            },
            keyup:function(){
                parseHtml.initDestination();
            }
        });
        $mobile.on({
            blur:function(){
                orderSave.chkMobile();
            },
            focus:function(){
                $mobileForm.addClass("form-focus").removeClass("form-error");
            }
        });
        $realname.on({
            blur:function(){
                orderSave.chkRealname();
            },
            focus:function(){
                $realnameForm.addClass("form-focus").removeClass("form-error");
            }
        });
        $("#success_close").click(function(){
            var $self = $(this);
            window.location.href="/";
        });
        //New destination
        $inputList.on({
            mouseover:function(){
                var $self = $(this);
                $self.find("i.options-close").show().click(function(){
                    $self.remove();
                });
            },
            mouseout:function(){
                var $self = $(this);
                $self.find("i.options-close").hide();
            }
        }, "span.options");
    });
    var orderSave = {
        chkToken:function(){
            if(!formToken || formToken.length<=0) {
                parseHtml.alertLayer("亲，请先刷新页面，否则无法下单");
                return false;
            }
            return true;
        },
        chkDestination:function(){

            var destLen = $("div.tagsinput").find("span.tag").size();
            if(destLen<=0) {
                $destForm.addClass("form-error").removeClass("form-focus");
                $destMsg.text("亲，请问您打算去哪里玩？");
                $destErrmsg.show();
                return false;
            }
            $destForm.removeClass("form-error").addClass("form-focus");
            $destErrmsg.hide();
            $destMsg.text("");
            return true;
        },
        chkFriend:function(){
            var friendArr = [];
            $friendList.find("div.f-radio").each(function(){
                var $self = $(this);
                if($self.hasClass("f-radio-selected")) {
                    friendArr.push($.trim($self.text()));
                }
            });
            var friendLen = friendArr.length;
            if(friendLen<=0) {
                $friendForm.addClass("form-error").removeClass("form-focus");
                $friendMsg.text("亲，您打算和谁一起去玩？");
                $friendErrmsg.show();
                return false;
            }
            $friendForm.removeClass("form-error").addClass("form-focus");
            $friendMsg.text("");
            $friendErrmsg.hide();
            return true;
        },
        chkDatetime:function(){
            var year = $.trim($showYear.attr("rel"));
            if(!$.isNumeric(year) || 4!=year.length) {
                $dateForm.addClass("form-focus");
                $dateMsg.text("亲，您打算什么时候去玩？");
                $dayErrmsg.show();
                return false;
            }
            $dateForm.removeClass("form-error").addClass("form-focus");
            $dateMsg.text("");
            $dayErrmsg.hide();
            return true;
        },
        chkBlurMonth:function(){
            var month = $.trim($showMonth.attr("rel"));
            var day = $.trim($showDay.attr("rel"));
            $dateForm.addClass("form-focus");
            return true;
        },
        chkRealname:function(){
            var realname = $.trim($realname.val());
            if(!realname || ""==realname) {
                $realnameForm.addClass("form-error").removeClass("form-pass form-focus");
                $realnameMsg.text("亲，请填写微信号？");
                $nameErrmsg.show();
                return false;
            }
            $realnameForm.addClass("form-focus form-pass").removeClass("form-error");
            $realnameMsg.text("");
            $nameErrmsg.hide();
            return true;
        },
        chkMobile:function(){
            var mobile = $.trim($mobile.val());
            if(!mobile || ""==mobile) {
                $mobileForm.addClass("form-error").removeClass("form-focus form-pass");
                $mobileMsg.text("亲，我们怎么联系您？");
                $mobileErrmsg.show();
                return false;
            }
            if(!/^1\d{10}$/.test(mobile)) {
                $mobileForm.addClass("form-error").removeClass("form-focus form-pass");
                $mobileMsg.text("亲，这个号码好像联系不上你");
                $mobileErrmsg.show();
                return false;
            }
            $mobileForm.addClass("form-focus form-pass").removeClass("form-error");
            $mobileErrmsg.hide();
            $mobileMsg.text("");
            return true;
        },
        getDestination:function(){
            return $.trim($destination.val());
        },
        getFriend:function(){
            var friendArr = [];
            $friendList.find("div.f-radio").each(function(){
                var $self = $(this);
                if($self.hasClass("f-radio-selected")) {
                    friendArr.push($.trim($self.text()));
                }
            });
            return friendArr.join("|");
        },
        getDatetime:function(){
            var year = $.trim($showYear.attr("rel"));
            var month = $.trim($showMonth.attr("rel"));
            var day = $.trim($showDay.attr("rel"));
            var sdate = year;
            if($.isNumeric(month) && parseInt(month)>0) {
                sdate = year + "-" + month;
                if($.isNumeric(day) && parseInt(day)>0) {
                    sdate = year + "-" + month + "-" + day;
                }
            }
            return sdate;
        },
        getRealname:function(){
            return $.trim($realname.val());
        },
        getMobile:function(){
            return $.trim($mobile.val());
        }
    };
    $(function(){
        $("#confirm_btn").click(function(){
            if(destFlag) {return false;}
            if(!orderSave.chkToken()) {return false;}
            if(!orderSave.chkDestination()) {return false;}
            if(!orderSave.chkFriend()) {return false;}
            if(!orderSave.chkDatetime()) {return false;}
            $("#contact_mask,#contact_box").fadeIn("400");
            $(this).addClass("f-btn-disable").text("请稍后，处理中…");
            destFlag = true;
            contactFlag = false;
            $("#realname,#mobile").val("");
            $submitBtn.removeClass("f-btn-disable");
            parseHtml.initNameMobile();
            return true;
        });
        $("#contact_close").click(function(){
            $("#contact_mask,#contact_box").fadeOut("200");
            destFlag = false;
            $("#confirm_btn").removeClass("f-btn-disable").text("开启我的定制之旅");
        });
        $submitBtn.click(function(){
            if(contactFlag) {return false;}
            if(!orderSave.chkRealname()) {return false;}
            if(!orderSave.chkMobile()) {return false;}
            var destinationList = orderSave.getDestination();
            var destArr = [];
            if(1!=destinationList.indexOf(",")) {
                destArr = destinationList.split(",");
            }
            else{
                destArr.push(destinationList);
            }
            var params = {
                "token":formToken,
                "dest":destArr.join(" "),
                "user_demand":"和"+orderSave.getFriend()+"出去游玩",
                "starttime":orderSave.getDatetime(),
                "realname":orderSave.getRealname(),
                "mobile":orderSave.getMobile()
            };
            contactFlag = true;
            $submitBtn.addClass("f-btn-disable").text("保存中…");
            $.ajax({
                type:"POST",
                url:"/ordercext/saveSimpleOrder",
                data:params,
                dataType:"json",
                success:function(data){
                    if(data.status && 1==data.status) {
                        var resultJson = data.data;
                        var isOpen = YearMonth.formatNum(resultJson.is_valid);
                        $("#contact_mask,#contact_box").hide();
                        $("#mobile,#realname").val("");
                        $("#member_id").val(resultJson.member_id);
                        $submitBtn.removeClass("f-btn-disable").text("填好了");
                        if(1==isOpen) {
                            $("#success_mask,#success_box").fadeIn("400");
                        }
                        else{
                            $("#qrcode_mask,#qrcode_box").fadeIn("400", function(){
                                //微信登陆二维码
                                stopFlag = false;
                                memberLogin.getWeixinImg(2);
                                if('1'==$('#wx_login_img').attr('rel')){
                                    memberLogin.checkWeixinScan(2);
                                }
                            });
                        }
                        return true;
                    }
                    else{
                        var errMsg = '需求提交失败';
                        if("token"==data.info) {
                            errMsg = '需求提交失败<br>请先刷新页面再下单';
                        }
                        $("#contact_close").click();
                        parseHtml.alertLayer(errMsg);
                        contactFlag = false;
                        $submitBtn.removeClass("f-btn-disable").text("填好了");
                    }
                },
                error:function(){
                    $("#contact_close").click();
                    parseHtml.alertLayer("应用连接错误");
                    contactFlag = false;
                    $submitBtn.removeClass("f-btn-disable").text("填好了");
                }
            });
        });
    });
</script>
		</div>
			<div class="contactbox">
			<div class="popup-title"><i class="popup-close"></i></div>
			<h2>私人客服</h2>
			<p>您有什么问题，请跟我们的私人客服进行沟通！</p>
			<img src="images/kefu.jpg" />
			<div class="saoyisao"><img src="images/saoyisao.png"/></div>
		</div>
		<script type='text/javascript'>
				(function(){
					 new PopUp_api({el:'.webim-online-click',html:'.contactbox'});
				})()
		</script>
	</body>
</html>
